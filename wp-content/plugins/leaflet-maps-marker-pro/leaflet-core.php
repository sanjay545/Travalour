<?php // Before trying to crack the plugin, please consider buying a pro license at https://www.mapsmarker.com. I have put hundreds of hours into the development of the plugin and without honest customers I will not be able to continue the development and support. Thanks for your understanding and your honesty! Robert
if (basename($_SERVER["SCR\111PT_FILENAME"]) == "\154\145\141flet-core.p\150\160") { exit ("\120\154\145ase do not ac\143\145\163s this file\040\144irectly. T\150\141\156ks!<br/><\141\040href='https:\057\057\167ww.maps\155\141rker.com/g\157\047>www.mapsm\141\162\153er.com<\057\141\076"); } if (is_admin()) { include_once (ABSPATH."wp-admin".DIRECTORY_SEPARATOR."inc\154\165\144es".DIRECTORY_SEPARATOR."plugin.php"); if (is_plugin_active("leafle\164\055\155aps-marker/l\145\141\146let-maps-mark\145\162\056php")) { if (!is_multisite()) { deactivate_plugins("leafl\145\164\055maps-marker\057\154\145aflet-maps-\155\141\162ker.php",$silent=FALSE,$network_wide=NULL); activate_plugin("leaflet-map\163\055\155arker-pro/l\145\141\146let-maps-ma\162\153\145r.php",$redirect="\160\154ugins.php?activa\164\145\075true",$network_wide=FALSE,$silent=FALSE); } else { include_once (ABSPATH."\167\160-includes".DIRECTORY_SEPARATOR."pluggable.php"); if (is_network_admin()) { deactivate_plugins("leaflet-maps-mar\153\145\162/leaflet-m\141\160\163-marker.php",$silent=FALSE,$network_wide=TRUE); activate_plugin("leaf\154\145\164-maps-marker-\160\162\157/leaflet-map\163\055\155arker.php",$redirect=FALSE,$network_wide=TRUE,$silent=FALSE); } else { deactivate_plugins("\154eaflet-maps-mark\145\162\057leaflet-ma\160\163\055marker.php",$silent=FALSE,$network_wide=NULL); activate_plugin("\154\145aflet-maps-ma\162\153\145r-pro/leafle\164\055\155aps-marker\056\160\150p",$redirect="plugins.\160\150\160?activate=tru\145",$network_wide=FALSE,$silent=FALSE); } } } } define( "l0" ,"\1670065406141o"); define( "LEAFLET_WP_ADMIN_URL" ,get_admin_url()); define( "LEAFLET_PLUGIN_URL" ,plugin_dir_url( __FILE__)); define( "LEAFLET_PLUGIN_DIR" ,plugin_dir_path( __FILE__)); $O0=wp_upload_dir(); define( "LEAFLET_PLUGIN_ICONS_URL" ,$O0["baseur\154"]."/\154\145\141flet-maps-marker-\151\143\157ns"); define( "LEAFLET_PLUGIN_ICONS_DIR" ,$O0["basedir"].DIRECTORY_SEPARATOR."leaflet-map\163\055\155arker-icons"); define( "LEAFLET_PLUGIN_QR_URL" ,$O0["baseu\162\154"]."\057\154eaflet-maps-m\141\162\153er-qr-codes"); define( "LEAFLET_PLUGIN_QR_DIR" ,$O0["\142\141sedir"].DIRECTORY_SEPARATOR."\154eaflet-maps-ma\162\153\145r-qr-codes"); define( "l1" ,get_admin_url()); define( "O1" ,plugin_dir_url( __FILE__)); define( "l2" ,plugin_dir_path( __FILE__)); define( "O2" ,$O0["\142\141seurl"]."/leaflet-maps-mark\145\162\055icons"); define( "l3" ,$O0["basedir"].DIRECTORY_SEPARATOR."leaflet-maps-mark\145\162\055icons"); if (is_admin()) { require_once (plugin_dir_path( __FILE__)."\151\156\143".DIRECTORY_SEPARATOR."clas\163\055\160lugin-update-\143\150\145cker.php"); } function O3() { if ((substr($_SERVER["REMOTE_ADDR"],0,4) == "127.") || ($_SERVER["REMOTE_ADDR"] == "\072:1")) { return TRUE; } else { return FALSE; } } class l4 { function __construct() { $O4=get_option("leafle\164\155\141psmarker_op\164\151\157ns"); add_action("init",array( &$this,"lmm_lo\141\144\137translation_fi\154\145\163"),1); add_action("admin_init",array( &$this,"\154\155m_load_setti\156\147\163_class"),2); add_action("\141dmin_init",array( &$this,"lmm_install_and\137\165\160dates"),3); add_action("\167p_enqueue_script\163",array( &$this,"\154mm_frontend_enqu\145\165\145_scripts")); add_action("\167p_print_styles",array( &$this,"lmm_frontend\137\145\156queue_style\163\150\145ets"),4); add_action("admin_menu",array( &$this,"\154\155\155_admin_menu"),5); add_action("\141\144min_init",array( &$this,"\154\155m_plugin_meta_lin\153\163"),6); add_action("admin\137\142\141r_menu",array( &$this,"\154mm_add_admin_bar\137\155\145nu"),0225); if (!empty($O4)) { add_shortcode($O4["short\143\157\144e"],array( &$this,"lmm_showmap")); } add_filter("\167\151dget_text","\144\157_shortcode"); if ( isset ($O4["misc_global_a\144\155\151n_notices"]) && ($O4["misc_g\154\157\142al_admin_noti\143\145\163"] == "show")) { add_action("\141dmin_notices",array( &$this,"lm\155\137\143ompatibility_c\150\145\143ks")); } if (!empty($O4)) { if ($O4["\155isc_add_georss_\164\157\137head"] == "\145nabled") { add_action("wp_head",array( &$this,"lmm_add\137\147\145orss_to_head")); } } if ( isset ($O4["\155\151\163c_tinymce_bu\164\164\157n"]) && ($O4["\155isc_tinymce_b\165\164\164on"] == "\145nabled")) { require_once (plugin_dir_path( __FILE__)."in\143".DIRECTORY_SEPARATOR."\164inymce-plugin.p\150\160"); } if ( isset ($O4["misc_plugin_langu\141\147\145"]) && ($O4["\155isc_plugin_l\141\156\147uage"] != "automatic")) { add_filter("\160lugin_locale",array( &$this,"\154\155m_set_plugin_loc\141\154\145"),"lmm"); } add_action("widge\164\163\137init",create_function("","ret\165\162\156 register_widg\145\164\050\042Cl\141\163\163_leaflet_r\145\143\145nt_marker_\167\151\144get\042\051\073")); if ( isset ($O4["m\151\163\143_admin_dashboa\162\144\137widget"]) && ($O4["\155\151sc_admin_dashboard\137\167\151dget"] == "enabled")) { if (!is_multisite()) { add_action("wp_dashboard_set\165\160",array( &$this,"lmm_regi\163\164\145r_widgets")); } else { add_action("\167p_network_dashb\157\141\162d_setup",array( &$this,"\154\155m_register_widg\145\164\163")); add_action("wp_dashboard_\163\145\164up",array( &$this,"lmm_registe\162\137\167idgets")); } } if (( isset ($O4["misc_po\151\156\164ers"])) && ($O4["\155isc_pointers"] == "\145nabled")) { $version_before_update=get_option("leafletmaps\155\141\162ker_version_p\162\157\137before_updat\145"); if ($version_before_update != "\060") { add_action("admin_enq\165\145\165e_scripts",array($this,"\154\155\155_update_point\145\162\137admin_script\163"),01751); } } add_action("admin_en\161\165\145ue_scripts",array($this,"\154\155\155_feature_pointer\137\141\144min_script\163"),01752); if (is_multisite()) { add_action("dele\164\145\137blog",array( &$this,"lmm_delete_mu\154\164\151site_blog")); } add_action("\164\145\155plate_include",array( &$this,"\154\155\155_template_check_\163\150\157rtcode")); add_action("\160lugin_row_met\141",array( &$this,"lmm_plugins_page_a\144\144\137links"),012,2); add_filter("\165pload_mimes",array( &$this,"\154\155m_permit_mime_ty\160\145\163_on_upload")); add_filter("\160\157st_mime_types",array( &$this,"\154mm_modify_post_mi\155\145\137types")); } function lmm_register_activation_hook() { global $wp_version; if (version_compare($wp_version,"3.3","<")) { exit ("\133Maps Marker \120\162\157 - installat\151\157\156 failed!]: W\157\162\144Press Ver\163\151\157n 3.3 or \150\151\147her is n\145\145\144ed for\040\164his plugin\040\050you are u\163\151\156g vers\151\157\156 ".$wp_version.") - please upgrade\040\171\157ur WordPre\163\163\040installatio\156\041"); } if (version_compare(phpversion(),"5.2","\074")) { exit ("[Maps Marker Pro \055\040installation fai\154\145\144]: PHP 5.2 \151\163\040needed fo\162\040\164his plug\151\156\040(you are\040\165sing PHP ".phpversion()."; note: support fo\162\040\120HP 4 has b\145\145\156 officially\040\144\151scontinu\145\144\040since 200\067\05512-31!) - p\154\145\141se upgr\141\144\145 your PH\120\040\151nstall\141\164\151on!"); } } function lmm_modify_post_mime_types($post_mime_types) { $post_mime_types["\164ext/gpx"]=array(__("\107PX track","l\155\155"),__("Manage GPX track\163","\154mm"),_n_noop("GPX track <span \143\154\141ss=\042c\157\165\156t\042>(%\163\051\074/span>","\107\120X tracks <spa\156\040\143lass=\042\143\157\165nt\042>(%\163\051\074/span>","\154mm")); return $post_mime_types; } function lmm_permit_mime_types_on_upload($existing_mimes=array()) { $existing_mimes["gpx"]="text/gpx"; return $existing_mimes; } function lmm_plugins_page_add_links($links,$file) { $plugin="leaflet-maps-mark\145\162\055pro/leaf\154\145\164-maps-marke\162\056\160hp"; $l5=get_option("\154\145afletmapsmark\145\162\137version_pro"); if ($file == $plugin) { $O5="\074a style=\042\164\145xt-decoration:n\157\156\145;\042 tit\154\145\075\042".esc_attr__("MapsM\141\162\153er affiliate pr\157\147\162am - sign u\160\040\156ow and re\143\145\151ve commis\163\151\157ns up to\040\065\060%!","lmm")."\042 href=\042\150\164\164ps://www.ma\160\163\155arker.com/a\146\146\151liates\042\040\164arget=\042\137\142\154ank\042\076\074img src=\042".O1."\151nc/img/icon-af\146\151\154iates.png\042\040\167idth=\0421\066\042 height=\042\061\066\042 alt=\042".esc_attr__("\115\141\160sMarker af\146\151\154iate progra\155\040\055 sign up n\157\167\040and rece\151\166\145 commissi\157\156\163 up to \065\060%!","lmm")."\042></a>"; $l6="<a \163\164\171le=\042tex\164\055\144ecoration:no\156\145\073\042 ti\164\154\145=\042".esc_attr__("MapsMarker resell\145\162\040program - r\145\055\163ell with \141\040\0620% disco\165\156\164!","\154\155\155")."\042 href=\042\150\164tps://www.mapsma\162\153\145r.com/resell\145\162\042 target=\042\137\142lank\042\076\074img src=\042".O1."inc/img/icon-re\163\145\154lers.png\042\040\167idth=\04216\042\040height=\042\061\066\042 alt=\042".esc_attr__("MapsMar\153\145\162 reseller prog\162\141\155 - re-sell w\151\164\150 a 20% disc\157\165\156t!","\154\155\155")."\042></a>"; $O6="<a style=\042\164\145\170t-decoratio\156\072\156one;\042\040\150ref=\042htt\160\163\072//www.ma\160\163\155arker.com\057\162eviews\042\040\164arget=\042\137\142lank\042 t\151\164\154e=\042".esc_attr__("p\154\145\141se rate this plu\147\151\156 on wordpres\163\056\157rg","lmm")."\042><img src=\042".O1."\151nc/img/icon-star.p\156\147\042 width=\042\061\066\042 heig\150\164\075\04216\042\040\141lt=\042".esc_attr__("ple\141\163\145 rate this plu\147\151\156 on wordpre\163\163\056org","lmm")."\042></a>"; $l7="\074\141\040href=\042\150\164\164ps://transl\141\164\145.mapsmarke\162\056\143om/projec\164\163\057lmm\042\040\164\141rget=\042\137\142lank\042\040\164itle=\042".esc_attr__("translations","lmm")."\042><img src\075\042".O1."\151nc/img/icon-trans\154\141\164ions.png\042\040\167idth=\0421\066\042\040height=\042\061\066\042 al\164\075\042".esc_attr__("\164ranslations","\154\155m")."\042\076</a>"; $O7="\074a href=\042\150\164\164p://faceb\157\157\153.com/mapsma\162\153\145r\042 ta\162\147\145t=\042_b\154\141\156k\042 t\151\164\154e=\042".esc_attr__("\106ollow MapsMarke\162\040\157n Facebook","lmm")."\042><img src=\042".O1."inc/im\147\057\151con-facebook\056\160\156g\042 wi\144\164\150=\04216\042\040\150eight=\042\061\066\042 alt\075\042".esc_attr__("\106\157llow MapsMarker\040\157\156 Facebook","lmm")."\042></a>"; $l8="\074\141\040href=\042\150\164\164p://twitter\056\143\157m/mapsmark\145\162\042 target=\042\137\142lank\042\040\164\151tle=\042".esc_attr__("\106ollow @MapsMarker \157\156\040Twitter","\154mm")."\042\076<img src=\042".O1."inc\057\151\155g/icon-twitter\056\160\156g\042 wid\164\150\075\04216\042\040\150eight=\042\061\066\042 alt=\042".esc_attr__("\106ollow @MapsMar\153\145\162 on Twitter","lmm")."\042></a>"; $O8="<a href=\042\150\164tps://www.m\141\160\163marker.com/\053\042\040target=\042\137\142lank\042\040\164\151tle=\042".esc_attr__("\106\157\154low MapsMarker \157\156\040Google+","lmm")."\042><img src=\042".O1."i\156\143\057img/icon-googl\145\055\160lus.png\042\040\167idth=\0421\066\042\040height=\042\061\066\042 al\164\075\042".esc_attr__("\106ollow MapsMar\153\145\162 on Google+","lmm")."\042></a>"; $l9="<a href=\042\150\164\164p://feeds.f\145\145\144burner.com/M\141\160\163Marker\042\040\164\141rget=\042\137\142lank\042 \164\151\164le=\042\122\123\123\042><\151\155\147 src=\042".O1."\151\156c/img/icon-rss.\160\156\147\042 wid\164\150\075\04216\042\040\150eight=\042\061\066\042 alt=\042\162\163s\042><\057\141\076"; $O9="\074a href=\042h\164\164\160://feedburne\162\056\147oogle.com/f\142\057\141/mailveri\146\171\077uri=Maps\115\141\162ker\042\040\164\141rget=\042\137\142lank\042\040\164itle=\042R\123\123\040(via E\155\141\151l)\042\076\074img src=\042".O1."inc/\151\155\147/icon-rss-emai\154\056\160ng\042 wi\144\164\150=\04216\042\040\150eight=\042\061\066\042 alt=\042\162\163s-email\042\076</a>"; if ((la($Oa=FALSE,$lb=TRUE) === TRUE) && (la() === FALSE)) { $Ob="<br/></td></tr><\164\162\076<td colspa\156\075\0423\042 s\164\171\154e=\042bor\144\145\162-bottom:1\160\170\040solid #\143\143\143;padding\072\060;\042><di\166\040\163tyle=\042\160\141dding: 3\160\170\0405px;ba\143\153\147round-co\154\157\162: #FFE\102\105\070;borde\162\072\0401px s\157\154\151d #CC00\060\060;color: #\063\0633;\042><\163\164\162ong>".__("Warning: your \141\143\143ess to updat\145\163\040and support\040\146\157r Leaflet\040\115\141ps Marker\040\120\162o has e\170\160\151red!","lmm")."\074/strong><br/>"; $lc=get_option("\154\145afletmapsmarker_v\145\162\163ion_pro_lates\164"); if (($lc != NULL) && ($lc>$l5)) { $Ob.=__("Latest ava\151\154\141ble version:","lmm")."\040<a href='https://w\167\167\056mapsmarker.c\157\155\057v".$lc."\160\047 target='_blan\153\047\040title='".esc_attr__("click to show rel\145\141\163e notes","\154mm")."\047>".$lc."</a> "."(<a href='www.map\163\155arker.c\157\155\057changelo\147\057\160ro/' tar\147\145\164='_blank\047\076".__("sho\167\040all available ch\141\156\147elogs","lmm")."</a>)<br/>"; } $Ob.=sprintf(__("Y\157\165\040can continue\040\165\163ing version\040\045\163 without \141\156\171 limitatio\156\163\056 Nevert\150\145\154ess you \167\151ll not be \141\142\154e to get\040\165\160dates i\156\143\154uding b\165\147\146ixes, n\145\167\040featur\145\163\040and op\164\151\155ization\163\040as well as\040\141ccess to \157\165\162 suppor\164\040system. ","lmm"),$l5)."\074\142r/>".sprintf(__("<a href=\042\045\163\042>Pl\145\141\163e renew your\040\141\143cess to u\160\144\141tes and su\160\160\157rt to kee\160\040\171our pl\165\147\151n up-to\055\144\141te and \163\141\146e</a>.","lmm"),l1."\141\144min.php?page=leaf\154\145\164mapsmarker_\154\151\143ense")."</div>"; } else { $Ob=""; } $links[]=$O5."\046\156\142sp;".$l6."&nbsp;".$O6."&nbsp;".$l7."\046nbsp;".$O7."\046nbsp;".$l8."&nbsp;".$O8."\046nbsp;".$l9."\046\156bsp;".$O9.$Ob; } return $links; } function lmm_delete_multisite_blog($blog_id) { switch_to_blog($blog_id); $GLOBALS["\167pdb"]->query("\104ROP TABLE `".$GLOBALS["\167\160db"]->prefix."\154eafletmapsmark\145\162\137layers`"); $GLOBALS["\167\160db"]->query("DROP TABLE `".$GLOBALS["wpdb"]->prefix."leafletmaps\155\141\162ker_markers\140"); $O0=wp_upload_dir(); $icons_directory=$O0["\142asedir"].DIRECTORY_SEPARATOR."\154eaflet-maps-ma\162\153\145r-icons".DIRECTORY_SEPARATOR; if (is_dir($icons_directory)) { foreach (glob($icons_directory."\052\056*") as $v) { unlink($v); } rmdir($icons_directory); } } function lmm_update_pointer_admin_scripts() { $dismissed_pointers=explode(",",( string) get_user_meta(get_current_user_id(),"dis\155\151\163sed_wp_poin\164\145\162s",TRUE)); $dismissed_pointers=array_flip($dismissed_pointers); $Oc=FALSE; $lmm_version_new=get_option("lea\146\154\145tmapsmarker_ver\163\151\157n_pro"); $ld="\154mmvp".str_replace(".","",$lmm_version_new); if (! isset ($dismissed_pointers[$ld])) { $Oc=TRUE; add_action("admin_pr\151\156\164_footer_scr\151\160\164s",array($this,"lmm_update_pointe\162\137\146ooter_scrip\164")); } if ($Oc) { wp_enqueue_script("\167p-pointer"); wp_enqueue_style("\167\160-pointer"); } } function lmm_update_pointer_footer_script() { $lmm_version_new=get_option("\154\145afletmapsmark\145\162\137version_pro"); $ld="\154mmvp".str_replace("\056","",$lmm_version_new); $Od="<h3>".sprintf(esc_attr__("Maps Marker Pro plu\147\151\156 update t\157\040\166%1s was su\143\143\145ssful","\154\155\155"),$lmm_version_new)."</h3>"; $changelog_url="\074a href=\042".l1."\141\144min.php?page=\154\145\141fletmapsmarker\137\155\141rkers"."\042 style=\042\164\145xt-decoratio\156\072\156one;\042\076".__("chan\147\145\154og","lmm")."\074/a>"; $blogpost_url="<a hre\146\075\042https://www.\155\141\160smarker.com\057\166".$lmm_version_new."\160\042 target=\042\137\142lank\042 st\171\154\145=\042text-\144\145\143oration:n\157\156\145;\042>m\141\160\163marker.c\157\155\074/a>"; $Od.="\074p>".sprintf(esc_attr__("Ple\141\163\145 see the %1s fo\162\040\156ew features \157\162\040the blog \160\157\163t on %2s \146\157\162 more det\141\151\154s","\154mm"),$changelog_url,$blogpost_url)."\074\057p>"; ?><?php echo "\015\012\011\011<scr\151\160\164 type=\042\164\145\170t/javascri\160\164\042>// <![CD\101\124\101[\015\012\011\011jQuery(do\143\165\155ent).re\141\144\171(functi\157\156\050\044) \173\015\012\011\011\011\151f(typeo\146\050jQuery().p\157\151\156ter) !=\040\047undefined\047\051 \173\015\012\011\011\011\011\044('#tople\166\145\154_page_\154\145\141fletma\160\163marker_ma\162\153\145rs').\160\157\151nter(\173\015\012\011\011\011\011\011\143\157ntent: \047"; ?><?php echo $Od; ?><?php echo "',\015\012\011\011\011\011\011position: \173\015\012\011\011\011\011\011\011edg\145\072\040'left',\015\012\011\011\011\011\011\011al\151\147\156: 'cent\145\162\047\015\012\011\011\011\011\011\175,\015\012\011\011\011\011\011\143lose: fun\143\164\151on() \173\015\012\011\011\011\011\011\011\044\056post( aj\141\170\165rl, \173\015\012\011\011\011\011\011\011\011\160ointer:\040\047"; ?><?php echo $ld; ?><?php echo "',\015\012\011\011\011\011\011\011\011action: \047\144\151smiss-wp-\160\157\151nter'\015\012\011\011\011\011\011\011});\015\012\011\011\011\011\011\175\015\012\011\011\011\011\175\051.pointer('\157\160\145n');\015\012\011\011\011\175\015\012\011\011\175\051;\015\012\011\011// ]]>\074\057script>\015\012\011\011"; ?><?php } function lmm_feature_pointer_admin_scripts() { $dismissed_pointers=explode("\054",( string) get_user_meta(get_current_user_id(),"d\151\163\155issed_wp_point\145\162\163",TRUE)); $dismissed_pointers=array_flip($dismissed_pointers); $Oc=FALSE; if (! isset ($dismissed_pointers["\154mmesw"])) { $Oc=TRUE; add_action("\141dmin_print_foot\145\162\137scripts",array($this,"\154\155m_feature_pointe\162\137\146ooter_script")); } if ($Oc) { wp_enqueue_script("\167\160\055pointer"); wp_enqueue_style("\167p-pointer"); } } function lmm_feature_pointer_footer_script() { include ("\151\156c".DIRECTORY_SEPARATOR."\146\145ature-pointers.php"); } function lmm_register_widgets() { $O4=get_option("\154\145afletmapsmarker_\157\160\164ions"); if ($O4["mis\143\137\167hitelabel_back\145\156\144"] == "enabled") { $le=__("\115\141\160s - recent mar\153\145\162s","\154\155\155"); } else { $le=__("Maps Marker P\162\157\040- recent ma\162\153\145rs","\154mm"); } wp_add_dashboard_widget("lmm-admin-dashboa\162\144\055widget",$le,array( &$this,"lm\155\137\144ashboard_widge\164"),array( &$this,"\154\155\155_dashboard_\167\151\144get_control")); } function lmm_dashboard_widget() { global $wpdb; $O4=get_option("\154eafletmapsmar\153\145\162_options"); if ($O4["defaults_mar\153\145\162_custom_ico\156\137\165rl_dir"] == "no") { $defaults_marker_icon_dir=l3; $defaults_marker_icon_url=O2; } else { $defaults_marker_icon_dir=htmlspecialchars($O4["defaults_marke\162\137\151con_dir"]); $defaults_marker_icon_url=htmlspecialchars($O4["\144efaults_marker_ic\157\156\137url"]); } $table_name_markers=$wpdb->prefix."leafletmapsmarker_\155\141\162kers"; $widgets=get_option("d\141\163\150board_widget_opt\151\157\156s"); $widget_id="lmm-a\144\155\151n-dashboard-w\151\144\147et"; $number_of_markers= isset ($widgets[$widget_id]) && isset ($widgets[$widget_id]["items"]) ? absint($widgets[$widget_id]["items"]): 4; if ((la($Oa=FALSE,$lb=TRUE) === TRUE) && (la() === FALSE)) { $l5=get_option("\154eafletmapsmarker_v\145\162\163ion_pro"); echo "\074div style=\042\160\141\144ding: 3px 5\160\170\073backgroun\144\055\143olor: #FFE\102\105\070;border: \061\160x solid #CC\060\06000;border-r\141\144\151us: 3px\073\143olor: #333;\042\076<strong>".__("Warning: your acces\163\040\164o updates a\156\144\040support for\040\114\145aflet Map\163\040\115arker Pr\157\040\150as expi\162\145\144!","lmm")."</strong><br/>"; $lc=get_option("\154eafletmapsma\162\153\145r_version_pro_\154\141\164est"); if (($lc != NULL) && ($lc>$l5)) { echo __("Latest av\141\151\154able version\072","\154\155m")." <a href='https://\167\167\167.mapsmarker.\143\157\155/v".$lc."\160' target='_bla\156\153\047 title='".esc_attr__("\143\154\151ck to show r\145\154\145ase notes","lmm")."'>".$lc."\074/a> "."(<a h\162\145\146='www.mapsmar\153\145\162.com/changel\157\147\057pro/' tar\147\145\164='_blank\047\076".__("show all available \143\150\141ngelogs","lmm")."\074/a>)<br/>"; } echo sprintf(__("\131\157u can continue u\163\151\156g version %s \167\151\164hout any l\151\155\151tations. \116\145\166ertheless\040\171ou will no\164\040\142e able\040\164\157 get up\144\141\164es incl\165\144\151ng bug\146\151\170es, new \146\145\141tures \141\156\144 optimi\172\141\164ions a\163\040\167ell as\040\141\143cess t\157\040\157ur sup\160\157rt system.\040","\154\155m"),$l5)."\074\142\162/>".sprintf(__("<a href=\042\045\163\042>Ple\141\163\145 renew your \141\143\143ess to upd\141\164\145s and sup\160\157\162t to keep\040\171\157ur plug\151\156\040up-to-\144\141\164e and sa\146\145\074/a>.","lmm"),l1."\141\144\155in.php?page=l\145\141\146letmapsmarke\162\137\154icense")."\074/div>"; echo "\074hr style=\042\142\157\162der:0;heig\150\164\0721px;backg\162\157\165nd-color:#\144\070\1448d8;\042\057\076"; } $Oe=$wpdb->get_results($wpdb->prepare( "\123ELECT `id`,`marke\162\156\141me`,`icon`,`c\162\145\141tedon`,`crea\164\145\144by` FROM `$table_name_markers\140 ORDER BY `created\157\156\140 desc LIMIT %d" ,$number_of_markers),ARRAY_A); if ($Oe != NULL) { echo "<table style=\042\155\141rgin-bottom:5p\170\073\042><tr>"; foreach ($Oe as $row) { $icon=($row["\151\143\157n"] == NULL) ? O1."\154eaflet-dist/images\057\155\141rker.png": $defaults_marker_icon_url."\057".$row["\151con"]; echo "<td><a\040\150\162ef=\042".l1."\141\144min.php?page=\154\145\141fletmapsmarke\162\137\155arker&id=".$row["id"]."\042 title=\042".esc_attr__("e\144\151\164 marker","\154\155\155")."\042><img src=\042".$icon."\042\040\163tyle=\042\167\151\144th:80%;\042\076\074/a>"; echo "<\164\144\040style=\042ve\162\164\151cal-align:to\160\073\154ine-height:\061\056\062em;\042\076"; echo "\074a href=\042".l1."a\144\155\151n.php?page=lea\146\154\145tmapsmarker_\155\141\162ker&id=".$row["id"]."\042\040title=\042".esc_attr__("edit marker","\154\155\155")."\042>".htmlspecialchars(stripslashes($row["\155arkername"]))."</a><br\057\076".__("created on","lmm")."\040".date("Y-m-d - h:m",strtotime($row["\143\162eatedon"])).", ".__("created by","lmm")." ".$row["create\144\142\171"]; echo "</td></tr>"; } echo "</table\076"; } else { echo "\074\160\040style=\042\155\141rgin-bottom:5px\073\042\076".__("\116o marker created \171\145\164","lm\155")."</p>"; } if (! isset ($widgets[$widget_id]["blogposts"])) { $lf=1; } else if ( isset ($widgets[$widget_id]["blogposts"]) && ($widgets[$widget_id]["\142logposts"] == 1)) { $lf=0; } else { $lf=1; } if (($lf == 1) && ($O4["misc_wh\151\164\145label_backen\144"] == "d\151\163\141bled")) { require_once (ABSPATH.WPINC.DIRECTORY_SEPARATOR."\143\154\141ss-simplepie\056\160\150p"); $Of=new simplepie(); if (file_exists($defaults_marker_icon_dir.DIRECTORY_SEPARATOR."readme-icons.tx\164")) { $Of->enable_cache(TRUE); $Of->set_cache_location($location=$defaults_marker_icon_dir); $Of->set_cache_duration(0250600); } else { $Of->enable_cache(FALSE); } $Of->set_feed_url("\150\164tp://feeds.feed\142\165\162ner.com/Map\163\115\141rkerPro"); $Of->set_stupidly_fast(TRUE); $Of->enable_order_by_date(TRUE); $Of->init(); $Of->handle_content_type(); echo "<hr style=\042\142\157\162der:0;heigh\164\072\061px;backgr\157\165\156d-color:#d\070\144\070d8;\042\057\076<strong><\160\076".__("\114\141test blog p\157\163\164s from www.m\141\160\163marker.com","lmm")."</p></strong>"; if ($Of->get_items() == NULL) { $blogpost_url="\074\141\040href=\042\150\164\164ps://www.maps\155\141\162ker.com/\156\145\167s\042 ta\162\147\145t=\042_b\154\141\156k\042\076\150\164tps://\167\167\167.mapsmar\153\145\162.com/new\163\074\057a>"; echo sprintf(__("Feed could not be \162\145\164rieved, ple\141\163\145 try again l\141\164\145r or read\040\164\150e lates\164\040\142log post\163\040at %s","\154\155\155"),$blogpost_url); } foreach ($Of->get_items(0,3) as $item) { echo "<p  style=\042\155\141rgin:0.5em 0;\042\076".$item->get_date("\152\040\106 Y").": <strong><a h\162\145\146=\042".$item->get_permalink()."\077\162\145f=dashboard\042\076".$item->get_title()."\074\057a></strong>\074\057\160>".PHP_EOL; } echo "<p><a style=\042\164ext-decoration:\156\157\156e;\042 hr\145\146\075\042ht\164\160\163://www.ma\160\163\155arker.co\155\042\040target=\042\137\142lank\042\076\074img src=\042".O1."\151\156c/img/icon-webs\151\164\145-home.png\042\040\167\151dth=\042\061\066\042 height\075\042\0616\042\040\141\154t=\042m\141\160\163marker.\143\157\155\042> \115\141\160sMarker\056\143\157m</a>&n\142\163\160;<a sty\154\145\075\042te\170\164\055decora\164\151on:non\145\073\042 titl\145\075\042".esc_attr__("MapsMark\145\162\040affiliate pr\157\147\162am - sign up\040\156\157w and rece\151\166\145 commissi\157\156\163 up to 5\060\045!","lmm")."\042 href\075\042\150ttps://www.ma\160\163\155arker.com/aff\151\154\151ates\042 \164\141\162get=\042\137\142\154ank\042>\074\151mg src=\042".O1."\151\156c/img/icon-af\146\151\154iates.png\042\040\167\151dth=\042\061\066\042 height\075\042\0616\042 \141\154\164=\042".esc_attr__("MapsMa\162\153\145r affiliate p\162\157\147ram - sign u\160\040\156ow and re\143\145\151ve commis\163\151\157ns up to \065\060%!","lmm")."\042> ".__("\101\146\146iliates","\154\155\155")."</a>&nbsp;<a styl\145\075\042text-decorati\157\156\072none;\042\040\164\151tle=\042".esc_attr__("\115\141psMarker res\145\154\154er program -\040\162e-sell with a\040\062\060% discou\156\164\041","\154mm")."\042 href=\042\150\164tps://www.map\163\155\141rker.com/rese\154\154\145r\042 ta\162\147\145t=\042_b\154\141\156k\042><\151\155\147 src=\042".O1."in\143\057\151mg/icon-resell\145\162\163.png\042 w\151\144\164h=\04216\042\040\150eight=\042\061\066\042 alt=\042".esc_attr__("\115\141\160sMarker res\145\154\154er program - \162\145\055sell with \141\040\0620% disco\165\156\164!","\154mm")."\042> ".__("Resellers","\154\155m")."\074/a>&nbsp;<a \163\164\171le=\042tex\164\055\144ecoration:n\157\156\145;\042 hr\145\146\075\042htt\160\163\072//www.ma\160\163\155arker.c\157\155\057review\163\042\040target\075\042\137blank\042\040\164itle=\042".esc_attr__("\160\154ease rate this plu\147\151\156 on wordpres\163\056\157rg","lmm")."\042><img src=\042".O1."\151nc/img/icon-star.\160\156\147\042 width\075\042\0616\042 \150\145\151ght=\0421\066\042\040alt=\042".esc_attr__("plea\163\145\040rate this plug\151\156\040on wordpres\163\056\157rg","lmm")."\042> ".__("rate plug\151\156","lmm")."\074/a>&nbsp;<a href=\042\150\164tps://translat\145\056\155apsmarker.c\157\155\057projects/\154\155\155\042 ta\162\147\145t=\042\137\142\154ank\042\076\074img src=\042".O1."\151nc/img/icon-tr\141\156\163lations.png\042\040\167idth=\042\061\066\042 height=\042\061\066\042 al\164\075\042transl\141\164\151ons\042\076\040".__("\164\162anslations","\154mm")."\074/a>&nbsp;<a href=\042\150\164tp://twitter.\143\157\155/mapsmarker\042\040\164arget=\042\137\142lank\042>\074\151\155g src=\042".O1."inc/img/\151\143\157n-twitter.png\042\040\167idth=\04216\042\040\150eight=\042\061\066\042 alt=\042\164\167itter\042\076\040Twitter</\141\076&nbsp;<a h\162\145\146=\042h\164\164\160://face\142\157\157k.com/m\141\160\163marker\042\040\164arget=\042\137\142lank\042\076\074img src=\042".O1."inc/\151\155\147/icon-facebook\056\160\156g\042 wid\164\150\075\04216\042\040\150eight=\042\061\066\042 alt=\042\146\141cebook\042\076\040Facebook\074\057a>&nbsp;<a\040\150\162ef=\042\150\164tps://www.m\141\160\163marker.\143\157\155/+\042\040\164\141rget=\042\137\142lank\042\076\074img src=\042".O1."inc/img/icon-g\157\157\147le-plus.png\042\040\167idth=\04216\042\040\150eight=\042\061\066\042 alt=\042\147\157ogle+\042\076\040Google+\074\057a>&nbsp;<a\040\163\164yle=\042\164\145xt-decora\164\151\157n:none\073\042 href=\042\150\164tps://www.\155\141\160smarke\162\056\143om/cha\156\147\145log\042\040\164arget=\042\137\142lank\042\076\074img src=\042".O1."in\143\057\151mg/icon-change\154\157\147-header.png\042\040\167idth=\042\061\066\042 heigh\164\075\04216\042 \141\154\164=\042\143\150\141ngelog\042\076\040".__("Changelog","lmm")."\074/a>&nbsp;<a h\162\145\146=\042http:/\057\146\145eds.feedbu\162\156\145r.com/Maps\115\141\162ker\042 \164\141\162get=\042\137\142lank\042\076\074\151mg src=\042".O1."\151\156\143/img/icon-rs\163\056\160ng\042 wi\144\164\150=\04216\042\040\150eight=\042\061\066\042 alt=\042\162\163s\042> R\123\123\074/a>&nbs\160\073\074a href\075\042http://feed\142\165\162ner.goo\147\154\145.com/fb\057\141\057mailve\162\151\146y?uri=M\141\160\163Marker\042\040target=\042\137\142lank\042\076\074img src=\042".O1."\151nc/img/icon-rss\055\145\155ail.png\042\040\167\151dth=\042\061\066\042 height\075\042\0616\042 a\154\164\075\042rs\163\055\145mail\042\076\040".__("\105\055Mail","lmm")."\074/a></p>"; } } function lmm_dashboard_widget_control() { $O4=get_option("leafletm\141\160\163marker_opti\157\156\163"); $widget_id="\154\155m-admin-dash\142\157\141rd-widget"; $form_id="lmm-admin-dashboar\144\055\167idget-contro\154"; $update=FALSE; if (!$widget_options=get_option("\144ashboard_wid\147\145\164_options")) $widget_options=array(); if (! isset ($widget_options[$widget_id])) { $widget_options[$widget_id]=array("\142logposts" => 0,"\151\164ems" => 5); $update=TRUE; } if ("POST" == $_SERVER["\122\105QUEST_METHOD"] && isset ($_POST[$form_id])) { $number=($_POST[$form_id]["items"] == NULL) ? "3": absint($_POST[$form_id]["items"]); $lg= isset ($_POST[$form_id]["blogposts"]) ? "1": "0"; $widget_options[$widget_id]["\151\164\145ms"]=$number; $widget_options[$widget_id]["\142logposts"]=$lg; $update=TRUE; } if ($update) update_option("\144\141shboard_widget_op\164\151\157ns",$widget_options); $number= isset ($widget_options[$widget_id]["items"]) ? ( integer) $widget_options[$widget_id]["\151\164\145ms"]: ""; echo "<p><label fo\162\075\042lmm-admin\055\144\141shboard-wid\147\145\164-number\042\076".__("\116\165\155ber of marke\162\163\040to show:")."\040\074/label>"; echo "\074\151nput id=\042\154\155\155-admin-das\150\142\157ard-widget-\156\165\155ber\042 \156\141\155e=\042".$form_id."\133\151\164ems]\042 ty\160\145\075\042text\042\040\166alue=\042".$number."\042 size=\042\062\042\040/></p>"; if ($O4["\155\151\163c_whitelabel\137\142\141ckend"] == "disabled") { echo "\074\160><label for=\042\154\155\155-admin-dash\142\157\141rd-widget-\142\154\157gposts\042\076".__("Hi\144\145\040blog posts an\144\040\154ink section\072")." </label>"; echo "\074input id=\042\154\155\155-admin-dashb\157\141\162d-widget-blo\147\160\157sts\042 \156\141\155e=\042".$form_id."\133\142\154ogposts]\042\040\164ype=\042chec\153\142\157x\042 ".checked($widget_options[$widget_id]["blogposts"],1,FALSE)."/></p>"; } } function lmm_load_translation_files() { load_plugin_textdomain("\154mm",FALSE,dirname(plugin_basename( __FILE__))."\057languages/"); } function lmm_set_plugin_locale($lang) { $O4=get_option("leafletm\141\160\163marker_optio\156\163"); global $locale; if ($O4["misc_plugin_languag\145\137\141rea"] == "\142ackend") { return is_admin() ? $O4["\155isc_plugin_lang\165\141\147e"]: $locale; } else if ($O4["misc_plugi\156\137\154anguage_area"] == "frontend") { return is_admin() ? $locale: $O4["misc_pl\165\147\151n_language"]; } else if ($O4["misc_plugin\137\154\141nguage_area"] == "both") { return $O4["\155isc_plugin_\154\141\156guage"]; } else { return $locale; } } function lmm_compatibility_checks() { include ("i\156\143".DIRECTORY_SEPARATOR."com\160\141\164ibility-checks.\160\150\160"); } function lmm_help() { include ("leaflet-hel\160\055\143redits.php"); } function lmm_settings() { global $Og; $Og->display_page(); } function lmm_list_layers() { include ("leaflet-list-la\171\145\162s.php"); } function lmm_list_markers() { include ("\154\145\141flet-list-marke\162\163\056php"); } function lmm_layer() { include ("leaflet-layer.php"); } function lmm_marker() { include ("leaflet-marker.php"); } function lmm_import_export() { include ("leaflet-import\055\145xport.php"); } function lmm_tools() { include ("\154eaflet-tools.php"); } function lmm_add_georss_to_head() { $georss_to_head="\074\154ink rel=\042\141\154\164ernate\042\040\164\171pe=\042a\160\160\154ication/r\163\163\053xml\042\040\164itle=\042".get_bloginfo("na\155\145")."\040\107eoRSS-Feed\042\040\150ref=\042".O1."\154\145aflet-georss.\160\150\160?layer=all\042\040\057>".PHP_EOL; echo $georss_to_head; } function lmm_showmap($atts) { require ("\151nc".DIRECTORY_SEPARATOR."showmap_pre\160\141\162e.php"); return $lh; } function lmm_load_settings_class() { if (is_admin()) { require_once (plugin_dir_path( __FILE__)."inc".DIRECTORY_SEPARATOR."class-leafle\164\055options.php"); global $Og; $Og=new class_leaflet_options(); } } function lmm_admin_menu() { global $wp_version; if (version_compare($wp_version,"\063\0568-alpha","\076")) { $Oh="-wh\151\164\145"; } else { $Oh=""; } $O4=get_option("\154eafletmapsmar\153\145\162_options"); if (!empty($O4)) { $capabilities=$O4["capabilit\151\145\163_edit"]; } else { $capabilities="\145dit_posts"; $Oi="activate_plugins"; } if (!empty($O4)) { if ($O4["misc_whitelabel\137\142\141ckend"] == "enabled") { $lj=esc_attr__("\115aps","lmm"); $Oi="activate_plugi\156\163"; } else { $lj="<sp\141\156\040style=\042\146\157\156t-size:92%\073\042\076Maps Mark\145\162\040Pro</span\076"; $Oi=$O4["capabilities_ed\151\164"]; } } else { $lj=esc_attr__("Maps","lmm"); $Oi="\141ctivate_plug\151\156\163"; } $page=add_object_page($lj,$lj,$capabilities,"\154\145\141fletmapsmar\153\145\162_markers",array( &$this,"lmm_list_\155\141\162kers"),O1."inc/img/ico\156\055\155enu-page".$Oh.".png"); if (!empty($O4)) { $page2=add_submenu_page("\154\145afletmapsmarker_ma\162\153\145rs",$lj."\040- ".__("List all ma\162\153\145rs","\154\155\155"),"\074\151\155g src=\042".O1."\151\156c/img/icon-menu-\154\151\163t".$Oh.".png\042\076\040".__("\114ist all marker\163","lmm"),$O4["\143apabilities_ed\151\164"],"leafletmapsmar\153\145\162_markers",array( &$this,"lmm_list_marke\162\163")); $page3=add_submenu_page("\154\145afletmapsmarker\137\155\141rkers",$lj." - ".__("\141\144d/edit marker","\154\155m"),"<\151\155\147 src=\042".O1."inc/i\155\147\057icon-menu-ad\144".$Oh."\056\160ng\042> ".__("Add new ma\162\153\145r","lmm"),$O4["c\141\160\141bilities_edit"],"\154\145afletmapsmarker_m\141\162\153er",array( &$this,"lmm_marker")); $page3b=add_submenu_page("\154eafletmapsmarker\137\155\141rkers",$lj." - ".__("\111mport/Export","\154\155\155"),"\074\151mg src=\042".O1."\151\156\143/img/icon-menu\055\151\155port-expor\164".$Oh.".png\042> ".__("Import/Export","lmm"),$O4["\143\141pabilities_edit"],"\154\145afletmapsmark\145\162\137import_expo\162\164",array( &$this,"lmm_import_e\170\160\157rt")); $page4=add_submenu_page("\154eafletmapsmarker\137\155\141rkers",$lj."\040- ".__("\114\151st all layers","\154\155m"),"\074\151\155g src=\042".O1."inc/i\155\147\057icon-menu-li\163\164".$Oh.".png\042> ".__("List all layers","\154\155\155"),$O4["cap\141\142\151lities_edit"],"\154\145\141fletmapsmarker_\154\141\171ers",array( &$this,"\154\155\155_list_layers")); $page5=add_submenu_page("leafletmapsmarke\162\137\155arkers",$lj." - ".__("\141dd/edit layer","\154mm"),"<img src=\042".O1."inc/img\057\151\143on-menu-add".$Oh.".p\156\147\042> ".__("Add n\145\167\040layer","\154\155m"),$O4["ca\160\141\142ilities_edit"],"\154\145\141fletmapsmarker_\154\141\171er",array( &$this,"lmm_\154\141\171er")); } else { $page=""; $page2=""; $page3=""; $page3b=""; $page4=""; $page5=""; } $page6=add_submenu_page("\154eafletmapsmarke\162\137\155arkers",$lj." - ".__("\124\157ols","lmm"),"\074\150r noshade size=\042\061\042/><img src\075\042".O1."inc/\151\155\147/icon-menu-tool\163".$Oh."\056\160ng\042> ".__("Tools","lmm"),$Oi,"l\145\141\146letmapsmarker_t\157\157\154s",array( &$this,"lmm_tools")); $page7=add_submenu_page("\154eafletmapsmarker\137\155\141rkers",$lj." - ".__("\123ettings","lm\155"),"\074img src=\042".O1."\151\156\143/img/icon-menu\055\163\145ttings".$Oh.".\160\156\147\042> ".__("Settings","lmm"),$Oi,"lea\146\154\145tmapsmarker_se\164\164\151ngs",array( &$this,"lm\155\137\163ettings")); $page11=add_submenu_page("leafletmapsma\162\153\145r_markers",$lj."\040\055 Maps Marker API","<img src=\042".O1."\151\156c/img/icon-menu-a\160\151".$Oh.".png\042\076\040\115aps Marker \101\120\111",$Oi,"admin.php?page=le\141\146\154etmapsmarke\162\137\163ettings#lmm\055\155\151sc-secti\157\156\071"); if (!empty($O4)) { $page8=add_submenu_page("leafletmapsmarker\137\155\141rkers",$lj." - ".__("Support","lmm"),"<i\155\147\040src=\042".O1."\151\156\143/img/icon-men\165\055\150elp".$Oh.".png\042\076\040".__("Support","lmm"),$Oi,"leafletmapsmarke\162\137\150elp",array( &$this,"lmm_help")); $page10=add_submenu_page("\154eafletmapsmarke\162\137\155arkers",$lj." - ".__("\114\151cense settings","\154mm"),"\074\150\162 noshade siz\145\075\0421\042/\076\074\151mg src=\042".O1."inc/img/\151\143\157n-menu-setti\156\147\163".$Oh.".png\042\076\040".__("License se\164\164\151ngs","lmm"),$Oi,"\154\145\141fletmapsmarke\162\137\154icense","\155aps_marker_pro_\154\151\143ense_activatio\156\137\160age"); } else { $page8=""; $page10=""; } add_action("admin_print_script\163\055".$page3,array( &$this,"lmm_admin_enq\165\145\165e_scripts"),7); add_action("\141dmin_print_scr\151\160\164s-".$page5,array( &$this,"lmm_admin_enque\165\145\137scripts"),8); add_action("\141\144min_print_sty\154\145\163-".$page3,array( &$this,"lmm_admi\156\137\163electjs"),011); add_action("admin_pri\156\164\137scripts-".$page7,array( &$this,"\154mm_admin_sel\145\143\164js"),011); add_action("\141\144min_print_styl\145\163\055".$page3,array( &$this,"\154\155\155_admin_enqueu\145\137\163tylesheets_le\141\146\154et"),023); add_action("admin_print_sty\154\145\163-".$page5,array( &$this,"lmm_admin_enqueu\145\137\163tylesheets_le\141\146\154et"),023); add_action("\141\144min_print_s\164\171\154es-".$page,array( &$this,"lmm_admin\137\145\156queue_styleshee\164\163"),021); add_action("\141\144\155in_print_style\163\055".$page2,array( &$this,"lmm_admin_e\156\161\165eue_stylesheet\163"),022); add_action("ad\155\151\156_print_styles\055".$page3,array( &$this,"\154mm_admin_enq\165\145\165e_stylesheets"),023); add_action("admin_print_style\163\055".$page3b,array( &$this,"\154mm_admin_enqueu\145\137\163tylesheets"),023); add_action("\141\144min_print_st\171\154\145s-".$page4,array( &$this,"lmm_admin_enq\165\145\165e_stylesheets"),024); add_action("\141\144min_print_styles\055".$page5,array( &$this,"lmm_\141\144\155in_enqueue_styl\145\163\150eets"),025); add_action("a\144\155\151n_print_styl\145\163\055".$page6,array( &$this,"lmm_admi\156\137\145nqueue_styleshe\145\164\163"),026); add_action("\141\144min_print_styles\055".$page7,array( &$this,"\154\155m_admin_enqueue_\163\164\171lesheets"),027); add_action("a\144\155\151n_print_styles-".$page8,array( &$this,"lmm_admin_e\156\161\165eue_stylesheets"),027); add_action("\141\144min_print_styles\055".$page10,array( &$this,"\154\155\155_admin_enqueue_s\164\171\154esheets"),027); add_action("a\144\155\151n_print_styles-".$page3,array( &$this,"lmm_adm\151\156\137enqueue_stylesh\145\145\164s_datepicker"),030); add_action("\141\144min_print_styles\055".$page5,array( &$this,"lmm\137\141\144min_enqueue_sty\154\145\163heets_datepic\153\145\162"),030); add_action("\141\144min_enqueue_scrip\164\163",array( &$this,"\154mm_admin_enqueue_\163\164\171lesheets_admin\142\141\162"),031); add_action("\141dmin_print_sc\162\151\160ts-".$page,array( &$this,"\154mm_add_contextu\141\154\137help")); add_action("ad\155\151\156_print_scripts-".$page2,array( &$this,"lmm_add_context\165\141\154_help")); add_action("admi\156\137\160rint_scripts-".$page3,array( &$this,"lmm_add_context\165\141\154_help")); add_action("a\144\155\151n_print_script\163\055".$page3b,array( &$this,"\154mm_add_contextua\154\137\150elp")); add_action("admi\156\137\160rint_scripts-".$page4,array( &$this,"\154mm_add_contextu\141\154\137help")); add_action("admi\156\137\160rint_scripts-".$page5,array( &$this,"lmm_add_con\164\145\170tual_help")); add_action("\141\144min_print_scripts\055".$page6,array( &$this,"lmm_add_cont\145\170\164ual_help")); add_action("\141\144min_print_scripts\055".$page7,array( &$this,"\154\155\155_add_contextu\141\154\137help")); add_action("a\144\155\151n_print_scripts\055".$page8,array( &$this,"\154\155m_add_contextual\137\150\145lp")); add_action("admi\156\137\160rint_scripts-".$page10,array( &$this,"lmm_add_con\164\145\170tual_help")); add_action("\141\144min_print_scrip\164\163\055".$page3,array( &$this,"lmm_admin_enqueu\145\137\163cripts_jquer\171\144\141tepicker")); add_action("\141dmin_print_scr\151\160\164s-".$page5,array( &$this,"\154mm_admin_enq\165\145\165e_scripts_jqu\145\162\171datepicker")); add_action("adm\151\156\137print_scripts-".$page7,array( &$this,"lmm_admi\156\137\142ootstrap_tabs"),011); } function lmm_add_admin_bar_menu() { global $wp_version; $O4=get_option("\154\145afletmapsmarker_\157\160\164ions"); if ($O4["a\144\155\151n_bar_integrat\151\157\156"] == "enabled" && current_user_can($O4["capabilities_\145\144\151t"])) { global $wp_admin_bar; if ($O4["\155isc_whitelab\145\154\137backend"] == "enabled") { $Oj=esc_attr__("\115\141ps","lm\155"); $lk=""; } else { $Oj="\115\141ps Marker Pro"; $lk=array("\164itle" => "\127ordpress-Plugin ".__("\142\171","lmm")."\040www.mapsmarker.com"); } if (version_compare($wp_version,"3.8-alpha",">")) { $Oh="\055white"; $Ok="\074span class=\042\141\142-icon\042\076\074\057span><spa\156\040\143lass=\042\141\142-label\042\076".$Oj."\074\057span>"; } else { $Ok="<\151\155\147 style=\042\146\154\157at:left;mar\147\151\156:3px 5px 0\040\060;\042 src=\042".O1."\151nc/img/icon-tinym\143\145\056png\042/>\040".$Oj; $Oh=""; } $menu_items=array(array("\151\144" => "lmm","title" => $Ok,"href" => "","\155\145ta" => $lk),array("\151d" => "lmm-markers","\160arent" => "lmm","\164\151\164le" => "<img src=\042".O1."inc/im\147\057\151con-menu-list".$Oh."\056\160ng\042> ".__("List a\154\154\040markers","\154mm"),"href" => l1."admin.php?pag\145\075\154eafletmapsm\141\162\153er_markers"),array("id" => "lmm-add-ma\162\153\145r","\160\141rent" => "lmm","\164\151tle" => "\074img src=\042".O1."i\156\143\057img/icon-menu-ad\144".$Oh."\056\160ng\042> ".__("Add new \155\141\162ker","l\155\155"),"\150ref" => l1."\141dmin.php?page\075\154\145afletmapsma\162\153\145r_marker"),array("id" => "lmm-import-e\170\160\157rt","\160\141rent" => "lmm","tit\154\145" => "<img src=\042".O1."inc/i\155\147\057icon-menu-imp\157\162\164-export".$Oh.".png\042\076\040".__("Import/Export","l\155\155"),"href" => l1."\141dmin.php?page=l\145\141\146letmapsmarke\162\137\151mport_expo\162\164"),array("\151\144" => "\154mm-layers","\160\141rent" => "lmm","title" => "\074img src=\042".O1."inc/img/icon-me\156\165\055list".$Oh.".png\042> ".__("\114ist all layer\163","\154mm"),"href" => l1."admin.php?pag\145\075\154eafletmapsm\141\162\153er_layers"),array("\151d" => "lmm-add-layers","\160arent" => "lmm","\164\151\164le" => "\074img src=\042".O1."inc/img/icon\055\155\145nu-add".$Oh.".png\042> ".__("Add new layer","\154\155m"),"href" => l1."admin.php?pag\145\075\154eafletmapsma\162\153\145r_layer")); if (current_user_can("ac\164\151\166ate_plugins") && ($O4["m\151\163\143_whitelabel_bac\153\145\156d"] == "disabled")) { $menu_items=array_merge($menu_items,array(array("\151\144" => "lmm-tools","\160\141rent" => "lmm","\164itle" => "\074\150r style=\042\155\141rgin:3px 0;\042\040\156oshade size=\042\061\042/><img s\162\143\075\042".O1."i\156\143\057img/icon-menu\055\164\157ols".$Oh.".pn\147\042\076 ".__("Tools","\154\155\155"),"\150\162ef" => l1."admin.\160\150\160?page=leaflet\155\141\160smarker_tool\163"),array("\151\144" => "lmm-s\145\164\164ings","\160arent" => "lm\155","title" => "<img src=\042".O1."inc/img\057\151\143on-menu-sett\151\156\147s".$Oh.".png\042\076\040".__("Settings","\154\155m"),"href" => l1."admin.ph\160\077\160age=leafletm\141\160\163marker_setti\156\147\163"),array("\151d" => "lmm-api","\160\141rent" => "\154mm","title" => "\074img src=\042".O1."\151nc/img/icon-m\145\156\165-api".$Oh.".png\042\076\040\115aps Marker\040\101\120I","href" => l1."\141dmin.php?page=l\145\141\146letmapsmarker_\163\145\164tings#lmm-m\151\163\143-section9"))); } if ($O4["misc_whitel\141\142\145l_backend"] == "disabled") { $menu_items=array_merge($menu_items,array(array("id" => "lmm-he\154\160\055credits","parent" => "lmm","\164\151\164le" => "\074\151mg src=\042".O1."inc/img\057\151\143on-menu-hel\160".$Oh."\056\160ng\042> ".__("Support","lmm"),"h\162\145\146" => l1."admin.php?page=le\141\146\154etmapsmarker\137\150\145lp"),array("\151\144" => "lmm-license","\160\141rent" => "lmm","\164\151\164le" => "\074\150r style=\042\155\141rgin:3px 0;\042\040\156oshade size=\042\061\042/><img src\075\042".O1."\151nc/img/icon\055\155\145nu-settings".$Oh."\056\160ng\042> ".__("\114\151\143ense settin\147\163","\154\155\155"),"\150\162ef" => l1."admin.p\150\160\077page=leaflet\155\141\160smarker_lice\156\163\145"))); } foreach ($menu_items as $menu_item) { $wp_admin_bar->add_menu($menu_item); } } } function lmm_add_contextual_help() { $helptext="<p>".__("Do you have\040\161\165estions or\040\151\163sues with L\145\141\146let Maps M\141\162\153er? Pleas\145\040\165se the f\157\154\154owing s\165\160\160ort cha\156\156\145ls appr\157\160\162iately.","lmm")."\074br/>"; $helptext.="<strong>".__("Before you post \141\040\156ew support \164\151\143ket, please\040\146\157llow the \151\156\163tructions\040\146\162om <a hr\145\146\075\042h\164\164\160://www.\155\141\160smarker.\143\157\155/readme\055\146irst\042 t\141\162\147et=\042\137\142lank\042\076\150\164tp://w\167\167\056mapsma\162\153\145r.com/\162\145\141dme-fi\162\163\164</a> w\150\151\143h give\040\171ou a guid\145\154\151ne on \150\157w to deal\040\167ith the \155\157\163t com\155\157\156 issu\145\163.","lm\155")."</stron\147\076\074/p>"; $helptext.="\074ul>"; $helptext.="\074li><a href=\042\150\164tps://www.ma\160\163\155arker.com/faq\057\042\040target=\042\137\142lank\042\076".__("FAQ","\154mm")."\074/a> (".__("frequently asked qu\145\163\164ions","\154\155\155")."\051</li>"; $helptext.="<li><a href=\042\150\164tps://www.map\163\155\141rker.com/doc\163\057\042\040target=\042\137\142lank\042>".__("\104ocumentation","\154\155\155")."\074/a></li>"; $helptext.="<li>\074\141\040href=\042\150\164\164ps://www.maps\155\141\162ker.com/lo\147\151\156\042 tar\147\145\164=\042_b\154\141\156k\042>\155\141\160smarker\056\143\157m/login\074\057a> (".__("\163\165pport for pro \165\163\145rs","\154\155\155")."\051</li>"; $helptext.="</ul>"; $screen=get_current_screen(); $screen->add_help_tab(array("id" => "\154mm_help_tab","title" => __("Help & Support","\154mm"),"content" => $helptext)); } function lmm_admin_selectjs() { $l5=get_option("le\141\146\154etmapsmarker_ve\162\163\151on"); wp_enqueue_script(array("jquery")); wp_enqueue_script("\154\145afletmapsmark\145\162\055select2",LEAFLET_PLUGIN_URL."\151nc/js/select2/sel\145\143\1642.min.js",array("\152query"),$l5); wp_enqueue_style("\154\145afletmapsmarker\055\163\145lect2",LEAFLET_PLUGIN_URL."inc/js/select2/sel\145\143\1642.css",array(),$l5); wp_localize_script("le\141\146\154etmapsmarker-se\154\145\143t2","\155\141psmarkerjspro",array("\163ettings_search_pl\141\143\145holder" => __("start full-t\145\170\164 search","\154\155m"),"settings_search_\156\157\137results" => __("\116o matches found","\154\155m"))); } function lmm_admin_bootstrap_tabs() { $l5=get_option("leafletmapsmarker_\166\145\162sion"); wp_enqueue_script(array("\152query")); wp_enqueue_script("leafletmapsmarke\162\055\142ootstrap-ta\142\163",LEAFLET_PLUGIN_URL."\151\156c/js/bootstrap-ta\142\163\056min.js",array("\152\161uery"),$l5); } function lmm_frontend_enqueue_scripts() { global $locale; $O4=get_option("\154\145\141fletmapsmarker\137\157\160tions"); $l5=get_option("\154\145afletmapsmarker_\166\145\162sion_pro"); $google_adsense_status=$O4["\147\157ogle_adsense_sta\164\165\163"]; if ($google_adsense_status == "en\141\142\154ed") { $gmaps_libraries="&li\142\162\141ries=adsense"; } else { $gmaps_libraries=""; } if ($O4["\147oogle_maps_langua\147\145\137localization"] == "browse\162\137\163etting") { $google_language=""; } else if ($O4["google_maps_l\141\156\147uage_localiz\141\164\151on"] == "wordpress_set\164\151\156g") { if ($locale != NULL) { $google_language="\046\154anguage=".substr($locale,0,2); } else { $google_language="\046language=en"; } } else { $google_language="&languag\145\075".$O4["\147oogle_maps_languag\145\137\154ocalization"]; } if ($O4["\147\157\157gle_maps_bas\145\137\144omain_custom"] == "") { $gmaps_base_domain="&base_domain=".$O4["goo\147\154\145_maps_base_dom\141\151\156"]; } else { $gmaps_base_domain="\046base_doma\151\156\075".htmlspecialchars($O4["\147oogle_maps_base_\144\157\155ain_custom"]); } if ( isset ($O4["\147oogle_maps_api_ke\171"]) && ($O4["\147\157ogle_maps_api\137\153\145y"] != NULL)) { $google_maps_api_key=$O4["\147\157ogle_maps_api_k\145\171"]; } else { $google_maps_api_key=""; } $ll=(is_ssl() == TRUE) ? "https": "\150\164tp"; if ($O4["google_maps_api_s\164\141\164us"] == "\145nabled") { if ($O4["m\151\163\143_javascript_hea\144\145\162_footer_pro"] == "\146\157oter") { wp_register_script("leafletmap\163\155\141rker-googlema\160\163\055loader",$ll."://www.g\157\157\147le.com/jsapi?k\145\171\075".$google_maps_api_key,array(),.37e1,TRUE); } else { wp_enqueue_script("leafletmaps\155\141\162ker-googlema\160\163\055loader",$ll."://\167\167\167.google.com/jsap\151\077\153ey=".$google_maps_api_key,array(),.37e1,TRUE); } } $google_styling_json=($O4["google_st\171\154\151ng_json"] == NULL) ? "disable\144": str_replace("\042","'",$O4["\147\157ogle_styling_js\157\156"]); if ($O4["bingmaps_cultur\145"] == "autom\141\164\151c") { if ($locale != NULL) { $bing_culture=str_replace("\137","-",$locale); } else { $bing_culture="en_us"; } } else { $bing_culture=$O4["bingm\141\160\163_culture"]; } if ($O4["goog\154\145\137maps_api_sta\164\165\163"] == "\145nabled") { if ($O4["misc_javascript_h\145\141\144er_footer_pro"] == "footer") { wp_register_script("\154\145afletmapsmarker\055\143\157re",O1."\154\145aflet-dist/le\141\146\154et-core.js",array("leafletmapsmarker-g\157\157\147lemaps-loade\162"),$l5,FALSE); wp_register_script("\154\145\141fletmapsmarker-\141\144\144ons",O1."\154\145\141flet-dist/lea\146\154\145t-addons.js",array("leafletm\141\160\163marker-core"),$l5,FALSE); wp_register_script("sh\157\167\137map",O1."inc/js/show_ma\160\056\152s",array("\154\145\141fletmapsmark\145\162\055core","\154eafletmapsmarker-\141\144\144ons"),$l5,FALSE); } else { wp_enqueue_script("\154\145afletmapsmarker-\143\157\162e",O1."\154\145\141flet-dist/le\141\146\154et-core.js",array("\154eafletmapsmar\153\145\162-googlemaps-\154\157\141der"),$l5,FALSE); wp_enqueue_script("\154\145\141fletmapsmarke\162\055\141ddons",O1."\154\145aflet-dist/leaflet\055\141\144dons.js",array("leafletmapsmark\145\162\055core"),$l5,FALSE); } } else { if ($O4["\155\151sc_javascript_hea\144\145\162_footer_pro"] == "footer") { wp_register_script("\154\145\141fletmapsmark\145\162\055core",O1."\154\145\141flet-dist/le\141\146\154et-core.js",array(),$l5,FALSE); wp_register_script("\154eafletmapsmarke\162\055\141ddons",O1."\154\145aflet-dist/l\145\141\146let-addons.js",array("\154eafletmapsmarke\162\055\143ore"),$l5,FALSE); wp_register_script("show_ma\160",O1."\151\156\143/js/show_map.j\163",array("leafletm\141\160\163marker-core","\154eafletmapsmarker\055\141\144dons"),$l5,FALSE); } else { wp_enqueue_script("leafletmapsmark\145\162\055core",O1."le\141\146\154et-dist/leaflet\055\143\157re.js",array(),$l5,FALSE); wp_enqueue_script("\154\145afletmapsmarker-a\144\144\157ns",O1."l\145\141\146let-dist/leaflet\055\141\144dons.js",array("\154eafletmapsmarker\055\143\157re"),$l5,FALSE); } } if ($google_adsense_status == "disabled") { wp_localize_script("leafletmapsmarke\162\055core","\155\141\160smarkerjspro",array("\172oom_in" => __("Zoom in","lmm"),"zoom_out" => __("Zoom out","lmm"),"googlem\141\160\163_language" => $google_language,"\147ooglemaps_librari\145\163" => $gmaps_libraries,"google\155\141\160s_base_domain" => $gmaps_base_domain,"\142\151ng_culture" => $bing_culture,"google_ads\145\156\163e_status" => $google_adsense_status,"\147\157ogle_styling_jso\156" => $google_styling_json,"minimap_show" => __("\123\150ow minimap","\154\155\155"),"mini\155\141\160_hide" => __("\110\151de minimap","\154\155\155"),"minimap\137\163\164atus" => $O4["\155inimap_status"],"\146\165llscreen_button_ti\164\154\145" => __("Vi\145\167\040fullscreen","\154\155\155"),"fullscreen_\142\165\164ton_title_exi\164" => __("Ex\151\164\040fullscreen","\154\155\155"),"fullscreen_\142\165\164ton_position" => $O4["map_fullscr\145\145\156_button_posit\151\157\156"],"\155\141xzoom" => intval($O4["globa\154\137\155axzoom_level"]),"\147\157\157gle_maps_api_\163\164\141tus" => $O4["google_maps_api_\163\164\141tus"],"\155eters" => __("\155\145ters","lmm"),"feet" => __("feet","lmm"))); } else { $google_adsense_format=$O4["google_adsense_f\157\162\155at"]; $google_adsense_position=$O4["google_ad\163\145\156se_position"]; $google_adsense_backgroundColor=htmlspecialchars($O4["google_adse\156\163\145_backgroundCol\157\162"]); $google_adsense_borderColor=htmlspecialchars($O4["google_adsense\137\142\157rderColor"]); $google_adsense_titleColor=htmlspecialchars($O4["g\157\157\147le_adsense_bord\145\162\103olor"]); $google_adsense_textColor=htmlspecialchars($O4["\147\157\157gle_adsense_t\145\170\164Color"]); $google_adsense_urlColor=htmlspecialchars($O4["\147\157\157gle_adsense_ur\154\103\157lor"]); $google_adsense_channelNumber=htmlspecialchars($O4["google_\141\144\163ense_channelNu\155\142\145r"]); $google_adsense_publisherId=htmlspecialchars($O4["google_adsense_\160\165\142lisherId"]); wp_localize_script("\154\145afletmapsmarker\055\143\157re","\155apsmarkerjspro",array("\172oom_in" => __("Zoom in","lmm"),"zoo\155\137\157ut" => __("\132\157om out","lmm"),"googlema\160\163\137language" => $google_language,"\147\157oglemaps_libraries" => $gmaps_libraries,"\147\157oglemaps_base_do\155\141\151n" => $gmaps_base_domain,"\142\151\156g_culture" => $bing_culture,"goo\147\154\145_adsense_status" => $google_adsense_status,"google_adsense_f\157\162\155at" => $google_adsense_format,"\147oogle_adsense_pos\151\164\151on" => $google_adsense_position,"g\157\157\147le_adsense_backgr\157\165\156dColor" => $google_adsense_backgroundColor,"google_adsens\145\137\142orderColor" => $google_adsense_borderColor,"google_adsens\145\137\164itleColor" => $google_adsense_titleColor,"\147oogle_adsense_text\103\157\154or" => $google_adsense_textColor,"\147oogle_adsens\145\137\165rlColor" => $google_adsense_urlColor,"\147oogle_adsense_cha\156\156\145lNumber" => $google_adsense_channelNumber,"google_\141\144\163ense_publisherI\144" => $google_adsense_publisherId,"google_styling\137\152\163on" => $google_styling_json,"\155\151nimap_show" => __("\123how minimap","\154\155\155"),"minimap_hide" => __("Hide minimap","\154\155\155"),"minimap_status" => $O4["minimap_status"],"\146ullscreen_bu\164\164\157n_title" => __("View fullscreen","\154\155\155"),"fullscree\156\137\142utton_title_exi\164" => __("Ex\151\164\040fullscreen","\154\155\155"),"fullscreen_\142\165\164ton_position" => $O4["map_fullscreen_b\165\164\164on_position"],"maxzoom" => intval($O4["\147\154\157bal_maxzoom_l\145\166\145l"]),"\147\157\157gle_maps_api\137\163\164atus" => $O4["google_maps_api_st\141\164\165s"],"\155\145ters" => __("\155\145\164ers","lmm"),"fe\145\164" => __("feet","lmm"))); } } function lmm_admin_enqueue_scripts() { global $wp_version,$locale; $O4=get_option("leafletmapsma\162\153\145r_options"); $l5=get_option("\154\145afletmapsmarker_v\145\162\163ion_pro"); $google_adsense_status=$O4["google_\141\144\163ense_status"]; if ($google_adsense_status == "\145\156abled") { $gmaps_libraries="\046\154ibraries=place\163\054\141dsense"; } else { $gmaps_libraries="&libraries=places"; } if ($locale != NULL) { $lang=substr($locale,0,2); } else { $lang="\145n"; } if ($O4["google_maps_langua\147\145\137localization"] == "bro\167\163\145r_setting") { $google_language=""; } else if ($O4["google_maps_la\156\147\165age_localiza\164\151\157n"] == "wordpress_setti\156\147") { if ($locale != NULL) { $google_language="&language=".substr($locale,0,2); } else { $google_language="\046language=en"; } } else { $google_language="&language=".$O4["google_maps_\154\141\156guage_local\151\172\141tion"]; } if ($O4["\147\157\157gle_maps_base_\144\157\155ain_custom"] != "") { $gmaps_base_domain="&base\137\144\157main=".$O4["google_maps_base_\144\157\155ain"]; } else { $gmaps_base_domain="\046base_domain=".htmlspecialchars($O4["\147oogle_maps_b\141\163\145_domain_custom"]); } wp_enqueue_script(array("jquery")); $page=( isset ($_GET["\160\141ge"]) ? $_GET["\160\141ge"]: ""); if ($page == "leaf\154\145\164mapsmarker_lay\145\162") { if (version_compare($wp_version,"3.5","\076\075")) { wp_enqueue_media(); } else { wp_enqueue_style("\164hickbox"); wp_enqueue_script("\155\145dia-upload"); wp_enqueue_script("\164\150ickbox"); wp_enqueue_script("media-models"); } } if ( isset ($O4["google\137\155\141ps_api_key"]) && ($O4["\147\157ogle_maps_api_k\145\171"] != NULL)) { $google_maps_api_key=$O4["google_maps_a\160\151\137key"]; } else { $google_maps_api_key=""; } $ll=(is_ssl() == TRUE) ? "https": "http"; if ($O4["\147oogle_places_s\164\141\164us"] == "\145nabled") { wp_enqueue_script("\154eafletmapsmark\145\162\055googlemaps\055\154\157ader",$ll."\072\057/www.google.co\155\057\152sapi?key=".$google_maps_api_key,array(),.37e1,TRUE); } $google_styling_json=($O4["google_styling_j\163\157\156"] == NULL) ? "\144isabled": str_replace("\042","'",$O4["\147\157ogle_styling\137\152\163on"]); if ($O4["bingmaps_\143\165\154ture"] == "\141\165tomatic") { if ($locale != NULL) { $bing_culture=str_replace("\137","-",$locale); } else { $bing_culture="en_us"; } } else { $bing_culture=$O4["\142\151ngmaps_culture"]; } if ($O4["google_place\163\137\163tatus"] == "\145nabled") { wp_enqueue_script("\154\145\141fletmapsmarke\162\055\143ore",O1."leaflet-dist/\154\145\141flet-core.js",array("leafletmapsm\141\162\153er-googlemaps-\154\157\141der"),$l5,FALSE); wp_enqueue_script("leafletmapsmarker-a\144\144\157ns",O1."le\141\146\154et-dist/leafle\164\055\141ddons.js",array("leafletmapsmark\145\162\055core"),$l5,FALSE); $lm="\145nabled"; } else { wp_enqueue_script("l\145\141\146letmapsmarker-c\157\162\145",O1."\154\145\141flet-dist/leafle\164\055\143ore.js",array(),$l5,FALSE); wp_enqueue_script("leafletmapsmarker-a\144\144\157ns",O1."\154\145\141flet-dist/leafle\164\055\141ddons.js",array("leafletmapsma\162\153\145r-core"),$l5,FALSE); $lm="\144isabled"; } if ($google_adsense_status == "disabled") { wp_localize_script("leafletmap\163\155\141rker-core","\155apsmarkerjspro",array("zoom_in" => __("\132oom in","lmm"),"zoom_out" => __("Zoom out","lmm"),"googlemaps_la\156\147\165age" => $google_language,"\147ooglemaps_librarie\163" => $gmaps_libraries,"googlemaps_base_do\155\141\151n" => $gmaps_base_domain,"\142\151\156g_culture" => $bing_culture,"go\157\147\154e_adsense_statu\163" => $google_adsense_status,"google_styling\137\152\163on" => $google_styling_json,"\155\151\156imap_show" => __("Show minimap","\154\155m"),"minimap_hide" => __("\110ide minimap","\154\155\155"),"minimap_stat\165\163" => $O4["min\151\155\141p_status"],"\146\165llscreen_button_t\151\164\154e" => __("View fullscr\145\145\156","lmm"),"fu\154\154\163creen_button_tit\154\145\137exit" => __("Exit fullscreen","lm\155"),"\146\165\154lscreen_but\164\157\156_position" => $O4["map_full\163\143\162een_button_posi\164\151\157n"],"\155axzoom" => intval($O4["\147lobal_maxzoom_l\145\166\145l"]),"google_\155\141\160s_api_status" => $lm,"\155\145ters" => __("\155\145ters","lmm"),"feet" => __("\146\145\145t","lmm"))); } else { $google_adsense_format=$O4["\147\157ogle_adsense_fo\162\155\141t"]; $google_adsense_position=$O4["\147\157ogle_adsense_posit\151\157\156"]; $google_adsense_backgroundColor=htmlspecialchars($O4["\147\157ogle_adsense_ba\143\153\147roundColor"]); $google_adsense_borderColor=htmlspecialchars($O4["goo\147\154\145_adsense_bord\145\162\103olor"]); $google_adsense_titleColor=htmlspecialchars($O4["google_a\144\163\145nse_borderColo\162"]); $google_adsense_textColor=htmlspecialchars($O4["google_adsense_tex\164\103\157lor"]); $google_adsense_urlColor=htmlspecialchars($O4["google_\141\144\163ense_urlColor"]); $google_adsense_channelNumber=htmlspecialchars($O4["goo\147\154\145_adsense_channe\154\116\165mber"]); $google_adsense_publisherId=htmlspecialchars($O4["\147oogle_adsense_pu\142\154\151sherId"]); wp_localize_script("\154\145afletmapsmar\153\145\162-core","\155\141psmarkerjspro",array("\172oom_in" => __("\132oom in","l\155\155"),"zoom_out" => __("\132\157om out","lmm"),"googlema\160\163\137language" => $google_language,"\147\157\157glemaps_libra\162\151\145s" => $gmaps_libraries,"\147\157oglemaps_base_dom\141\151\156" => $gmaps_base_domain,"\142\151\156g_culture" => $bing_culture,"\147\157\157gle_adsense_sta\164\165\163" => $google_adsense_status,"\147oogle_adsense_f\157\162\155at" => $google_adsense_format,"\147\157ogle_adsense_po\163\151\164ion" => $google_adsense_position,"\147\157\157gle_adsense_ba\143\153\147roundColor" => $google_adsense_backgroundColor,"google_\141\144\163ense_borderCol\157\162" => $google_adsense_borderColor,"\147oogle_adsense_ti\164\154\145Color" => $google_adsense_titleColor,"\147\157ogle_adsense_te\170\164\103olor" => $google_adsense_textColor,"\147\157ogle_adsense_urlCo\154\157\162" => $google_adsense_urlColor,"\147oogle_adsense_\143\150\141nnelNumber" => $google_adsense_channelNumber,"google_adsense_publ\151\163\150erId" => $google_adsense_publisherId,"\147oogle_styling_json" => $google_styling_json,"\155inimap_show" => __("Show mi\156\151\155ap","lmm"),"minimap_hi\144\145" => __("Hi\144\145\040minimap","lmm"),"minima\160\137\163tatus" => $O4["minimap_status"],"\146ullscreen_button_ti\164\154\145" => __("View fullscreen","\154\155\155"),"fullscreen_butto\156\137\164itle_exit" => __("Exit \146\165\154lscreen","\154\155\155"),"fullscree\156\137\142utton_position" => $O4["map_fullsc\162\145\145n_button_posit\151\157\156"],"\155axzoom" => intval($O4["\147\154obal_maxzoom\137\154\145vel"]),"\147\157\157gle_maps_api\137\163\164atus" => $lm,"\155eters" => __("\155\145\164ers","lm\155"),"\146\145et" => __("\146\145\145t","lmm"))); } } function lmm_admin_enqueue_scripts_jquerydatepicker() { $l5=get_option("\154\145afletmapsmarke\162\137\166ersion_pro"); wp_enqueue_script(array("\152\161\165ery","jq\165\145\162y-ui-tabs","\152\161uery-ui-datepicke\162","\152query-ui-slide\162")); wp_enqueue_script("jquery-ui-timepicke\162\055\141ddon",O1."\151nc/js/jquery-ui-\164\151\155epicker-addon\056\152\163",array("jquery","jque\162\171\055ui-tabs","\152\161uery-ui-datepi\143\153\145r"),$l5); } function lmm_frontend_enqueue_stylesheets() { $O4=get_option("leafletmapsm\141\162\153er_options"); global $wp_query; $posts=$wp_query->posts; $pattern=get_shortcode_regex(); $l5=get_option("\154eafletmapsmar\153\145\162_version_pro"); if (function_exists("is\137\162\164l") && is_rtl()) { $Om="\154eafletmapsmark\145\162\055rtl"; $ln="\154\145aflet-rtl.min.\143\163\163"; } else { $Om="leafletmapsmark\145\162"; $ln="leaflet.min.css"; } wp_register_style($Om,O1."leaflet-\144\151\163t/".$ln,array(),$l5); if (is_array($posts)) { foreach ($posts as $post) { if (preg_match_all("/".$pattern."\057s",$post->post_content ,$matches) && array_key_exists(2,$matches) && in_array($O4["\163\150ortcode"],$matches[2])) { wp_enqueue_style($Om); break; } } $lmm_custom_css=".lea\146\154\145t-popup-cont\145\156\164 img \173 ".htmlspecialchars($O4["\144\145faults_marker_\160\157\160ups_image_c\163\163"])." } .marker-c\154\165\163ter-small \173\040\142ackground-co\154\157\162: ".htmlspecialchars($O4["\143lustering_color_\163\155\141ll"])."; } .marker-clu\163\164\145r-small div \173\040\142ackground-co\154\157\162: ".htmlspecialchars($O4["clustering_color\137\163\155all_inner"])."; color\072\040".htmlspecialchars($O4["\143\154ustering_colo\162\137\163mall_text"])."; } .mark\145\162\055cluster-medi\165\155\040\173 bac\153\147\162ound-color:\040".htmlspecialchars($O4["cl\165\163\164ering_color_med\151\165\155"])."\073 } .marker-c\154\165\163ter-medium div\040\173\040backgrou\156\144\055color: ".htmlspecialchars($O4["clustering_color_\155\145\144ium_inner"]).";  color: ".htmlspecialchars($O4["clustering_colo\162\137\155edium_text"])."; } .\155\141\162ker-cluster-la\162\147\145 \173 back\147\162\157und-color: ".htmlspecialchars($O4["\143\154ustering_color_l\141\162\147e"])."\073 } .marker-\143\154\165ster-large di\166\040\173 backgrou\156\144\055color: ".htmlspecialchars($O4["clustering_color_\154\141\162ge_inner"]).";  color: ".htmlspecialchars($O4["\143\154ustering_color_lar\147\145\137text"])."; }"; wp_add_inline_style($Om,$lmm_custom_css); } } function lmm_template_check_shortcode($template) { $O4=get_option("\154eafletmapsmarker_\157\160\164ions"); $searchterm="\133".$O4["sh\157\162\164code"]; $files=array($template,get_stylesheet_directory().DIRECTORY_SEPARATOR."header.php",get_stylesheet_directory().DIRECTORY_SEPARATOR."\146ooter.php"); if (function_exists("is_rtl") && is_rtl()) { $Om="leafle\164\155\141psmarker-rtl"; $ln="\154\145\141flet-rtl.min.cs\163"; } else { $Om="leaf\154\145\164mapsmarker"; $ln="leaflet.min.c\163\163"; } foreach ($files as $file) { if (file_exists($file)) { $contents=file_get_contents($file); if (strpos($contents,$searchterm)) { $l5=get_option("leafletmapsma\162\153er_version_pro"); wp_register_style($Om,O1."leaf\154\145\164-dist/".$ln,array(),$l5); wp_enqueue_style($Om); break; } } } return $template; } function lmm_admin_enqueue_stylesheets() { $l5=get_option("\154eafletmaps\155\141\162ker_version_\160\162\157"); if (function_exists("is_rtl") && is_rtl()) { wp_register_style("leafletmapsmarker-a\144\155\151n-rtl",O1."\151\156c/css/leaflet\155\141\160smarker-admin\055\162tl.css",array(),$l5); wp_enqueue_style("leafletmapsmarke\162\055\141dmin-rtl"); } else { wp_register_style("\154\145\141fletmapsmarker\055\141\144min",O1."inc/\143\163\163/leafletmapsma\162\153\145r-admin.css",array(),$l5); wp_enqueue_style("\154eafletmapsmarke\162\055\141dmin"); } } function lmm_admin_enqueue_stylesheets_leaflet() { global $wp_version; $l5=get_option("leafletmapsmark\145\162\137version_pro"); if (function_exists("is_rtl") && is_rtl()) { $Om="\154\145\141fletmapsmark\145\162\055rtl"; $ln="lea\146\154\145t-rtl.min.css"; } else { $Om="leafletmapsmark\145\162"; $ln="\154\145aflet.min.css"; } wp_register_style($Om,O1."\154eaflet-dist/".$ln,array(),$l5); wp_enqueue_style($Om); if (version_compare($wp_version,"\063.7",">=")) { $O4=get_option("\154eafletmapsma\162\153\145r_options"); $lmm_custom_css="\056\154eaflet-popup-con\164\145\156t img \173\040".htmlspecialchars($O4["def\141\165\154ts_marker_pop\165\160\163_image_css"])."\040\175 .marker-cluster\055\163\155all \173 ba\143\153\147round-color\072\040".htmlspecialchars($O4["\143\154ustering_col\157\162\137small"])."; } .marker-clu\163\164\145r-small div \173\040\142ackground-\143\157\154or: ".htmlspecialchars($O4["\143\154ustering_color_\163\155\141ll_inner"])."; \143\157\154or: ".htmlspecialchars($O4["\143lustering_color_s\155\141\154l_text"])."; } .marker-c\154\165\163ter-medium \173\040\142ackground-col\157\162\072 ".htmlspecialchars($O4["\143lustering_color_me\144\151\165m"])."\073 } .marker-c\154\165\163ter-medium di\166\040\173 backgroun\144\055\143olor: ".htmlspecialchars($O4["clustering_co\154\157\162_medium_inne\162"])."\073\040color: ".htmlspecialchars($O4["\143\154\165stering_col\157\162\137medium_text"])."\073\040\175 .marker-clus\164\145\162-large \173\040\142\141ckground-\143\157\154or: ".htmlspecialchars($O4["\143lustering_co\154\157\162_large"])."; } .marker-clu\163\164\145r-large div \173\040\142ackground-c\157\154\157r: ".htmlspecialchars($O4["\143\154ustering_color_lar\147\145\137inner"])."; color\072\040".htmlspecialchars($O4["clus\164\145\162ing_color_lar\147\145\137text"])."; }"; wp_add_inline_style($Om,$lmm_custom_css); } } function lmm_admin_enqueue_stylesheets_datepicker() { $l5=get_option("\154\145afletmapsmarker_\166\145\162sion_pro"); wp_register_style("\154\145afletmapsmarker-j\161\165\145ry-ui-custo\155",O1."inc/css\057\152\161uery-datepicke\162\055\164heme/jquery-\165\151\055custom.css",array(),$l5); wp_enqueue_style("\154\145\141fletmapsmarker-\152\161\165ery-ui-custo\155"); } function lmm_admin_enqueue_stylesheets_adminbar() { $O4=get_option("\154\145afletmapsmarke\162\137\157ptions"); if ($O4["admin_bar_in\164\145\147ration"] == "enabled" && current_user_can($O4["ca\160\141\142ilities_edit"])) { $l5=get_option("\154eafletmapsmarke\162\137\166ersion_pro"); wp_register_style("\154\145afletmapsmar\153\145\162-admin-admi\156\142\141r",O1."inc/css/leafletmap\163\155\141rker-admin-ad\155\151\156bar.css",array(),$l5); wp_enqueue_style("\154eafletmapsma\162\153\145r-admin-admi\156\142\141r"); } } function lmm_install_and_updates() { $current_version="v\160\061\0712"; $schedule_transient="\154eafletmapsmarke\162\137\151nstall_update\137\143\141che_".$current_version; $install_update_schedule=get_transient($schedule_transient); if ($install_update_schedule === FALSE) { $schedule_transient="\154\145\141fletmapsmark\145\162\137install_upda\164\145\137cache_".$current_version; set_transient($schedule_transient,"\145\170\145cute install an\144\040\165pdate-rout\151\156\145 only once \141\040\144ay",074*074*030); include ("inc".DIRECTORY_SEPARATOR."\151\156\163tall-and-upda\164\145\163.php"); } } function lmm_plugin_meta_links() { define( "FB_BASENAME" ,plugin_basename( __FILE__)); define( "FB_BASEFOLDER" ,plugin_basename(dirname( __FILE__))); define( "FB_FILENAME" ,str_replace(FB_BASEFOLDER."\057","",plugin_basename( __FILE__))); function leafletmapsmarker_filter_plugin_meta($links,$file) { if ($file == FB_BASENAME) { array_unshift($links,"\074\141 href=\042".l1."\141dmin.php?pag\145\075\154eafletmapsm\141\162\153er_markers\042\076".__("Markers","lmm")."</a>","<a h\162\145\146=\042".l1."admin.php\077\160\141ge=leafletma\160\163\155arker_layers\042\076".__("\114ayers","lmm")."\074/a>","<a hre\146\075\042".l1."admin.php?page\075\154\145afletmapsma\162\153\145r_settings\042\076".__("\123\145ttings","lmm")."\074\057a>","\074\141\040href=\042".l1."\141\144\155in.php?page=l\145\141\146letmapsmarke\162\137\154icense\042\076".__("\114icense","\154\155\155")."\074/a>"); } return $links; } add_filter("plugi\156\137\141ction_links","\154\145\141fletmapsmarker_f\151\154\164er_plugin_met\141",012,2); } } if (is_admin()) { $On= isset ($_GET["page"]) ? $_GET["\160\141ge"]: ""; $lo=array("l\145\141\146letmapsmarker_m\141\162\153ers","leafletmapsmarke\162\137\155arker","\154eafletmapsmarke\162\137\151mport_export","leafletmap\163\155\141rker_layers","leafletmapsmarke\162\137\154ayer","\154\145afletmapsmark\145\162\137tools","\154\145afletmapsmarker_se\164\164\151ngs"); if ((in_array($On,$lo)) && (O3() === FALSE)) { if (Oo() !== TRUE) { exit (header("Location: ".l1."admin.\160\150\160?page=leaflet\155\141\160smarker_lice\156\163\145")); } if (la($Oa=l0,$lb=FALSE) === FALSE) { $lp=array("\154eafletmapsmarke\162\137\155arkers","\154\145afletmapsmarke\162\137\155arker","\154\145afletmapsmarke\162\137\151mport_export","leafletmapsmarker_\154\141\171ers","lea\146\154\145tmapsmarker_layer","\154eafletmapsmarker_t\157\157\154s","\154\145afletmapsmarker_\163\145\164tings"); if (in_array($On,$lp)) { echo "<script type=\042\164\145xt/javascript\042\076window.locat\151\157\156.href = \042".l1."adm\151\156\056php?page=leafle\164\155\141psmarker_lic\145\156\163e&error=le\042\073\074/script\076\040\040"; } } } } function Op($lq,$is_theme=FALSE) { $Oq=""; if ( isset ($_GET["page"])) { $Oq=$_GET["\160\141\147e"]; } elseif ( isset ($_POST["\160\141\147e"])) { $Oq=$_POST["\160age"]; } $lr=in_array($Oq,$lq); if ($is_theme) { return $lr; } $ls=in_array(plugin_basename( __FILE__),get_option("active_pl\165\147\151ns")); return ($lr && $ls); } function Oo($Os=FALSE) { $lt=new Ot; $lt->lu ="\144\141\164abase"; $lt->Ou =array("local_key" => get_option("\154\145\141fletmapsmarkerpr\157\137\154icense_loc\141\154\137key")); $lt->lv =array("\146unction" => "\165\160\144ate_option","\153ey" => "leafletmapsmarke\162\160\162o_license_lo\143\141\154_key"); $lt->Ov ="1,2,3,4,5,6,7,8,9\054\0610"; $lt->lw =get_option("leafletmaps\155\141\162kerpro_licen\163\145\137key"); $lt->Ow ="\067ca99e156b5e30e0\066\064\070f49b81178c\144\067e"; $lt->lx ="https://www.mapsmar\153\145\162.com/store/a\160\151\057index.php"; $lt->validate(); if ($Os) { return $lt; } $lq=array("\154eafletmapsm\141\162\153er_markers","\154eafletmapsmark\145\162\137marker","\154eafletmapsmarker_i\155\160\157rt_export","leafletmapsmarke\162\137\154ayers","\154\145\141fletmapsmarker_\154\141\171er","\154\145afletmapsmar\153\145\162_tools","\154\145afletmapsmark\145\162\137settings"); if (is_admin() && Op($lq,TRUE) && $lt->Ox) { return $lt->Ox; } return TRUE; } function la($Oa=FALSE,$lb=FALSE) { $lt=new Ot; if ($Oa !== FALSE) { $lt->Oa =strrev(substr($Oa,1,012)); } $lt->lu ="database"; $lt->Ou =array("local_key" => get_option("leafletmapsmarkerp\162\157\137license_lo\143\141\154_key")); $lt->lv =array("function" => "\165\160\144ate_option","key" => "leafletmapsma\162\153\145rpro_license\137\154\157cal_key"); $lt->Ov ="\061\054\062,3,4,5,6,7,\070\054\071,10"; $lt->lw =get_option("\154\145afletmapsmark\145\162\160ro_license_ke\171"); $lt->Ow ="7ca99\145\061\0656b5e30e064\070\146\0649b81178cd7e"; $lt->lx ="\150ttps://www.mapsma\162\153\145r.com/store/ap\151\057\151ndex.php"; $lt->validate(); if ($lb !== FALSE) { if ($lt->Ox) { return FALSE; } else { return TRUE; } } if ($lt->Ox) { return FALSE; } if ($Oa === FALSE) { $ly=$lt->Oy["\144\157\167nload_acces\163\137\145xpires"]; $lz=$lt->Oy["supp\157\162\164_access_expi\162\145\163"]; $Oz=abs(($ly>$lz) ? $ly: $lz); if (!l10()) { if ($lt->Oy["\154icense_expires"] == "never") { return FALSE; } if (time()>$lt->Oy["\154\151cense_expires"]) { return FALSE; } return TRUE; } return ($Oz>time()) ? TRUE: FALSE; } else if ($Oa !== FALSE) { $ly=$lt->Oy["\144ownload_access_\145\170\160ires"]; $lz=$lt->Oy["suppo\162\164\137access_expire\163"]; $Oz=abs(($ly>$lz) ? $ly: $lz); if (!l10()) { if ($lt->Oy["\154icense_expires"] == "never") { return FALSE; } if (time()>$lt->Oy["license_e\170\160\151res"]) { return FALSE; } return TRUE; } if ($lt->Oa >$Oz) { return FALSE; } else { return TRUE; } } } function lmm_validate_license_info($release_date_info=FALSE,$license_only_info=FALSE) { $spbas_info=new Ot; if ($release_date_info !== FALSE) { $spbas_info->release_date_info =strrev(substr($release_date_info,1,012)); } $spbas_info->lu ="\144atabase"; $spbas_info->Ou =array("local_key" => get_option("leafletmap\163\155\141rkerpro_lice\156\163\145_local_key")); $spbas_info->lv =array("\146unction" => "update_\157\160\164ion","\153ey" => "\154eafletmapsmarkerp\162\157\137license_local\137\153\145y"); $spbas_info->Ov ="\061\0542,3,4,5,6,7,8,9,1\060"; $spbas_info->lw =get_option("leafletm\141\160\163markerpro_li\143\145\156se_key"); $spbas_info->Ow ="7ca99e156b\065\145\0630e0648f49b\070\061\06178cd7e"; $spbas_info->lx ="\150\164tps://www.mapsm\141\162\153er.com/store/\141\160\151/index.php"; $spbas_info->validate(); if ($license_only_info !== FALSE) { if ($spbas_info->Ox) { return FALSE; } else { return TRUE; } } if ($spbas_info->Ox) { return FALSE; } if ($release_date_info === FALSE) { $download_expires_info=$spbas_info->Oy["\144ownload_acces\163\137\145xpires"]; $support_expires_info=$spbas_info->Oy["\163upport_access_ex\160\151\162es"]; $expires_info=abs(($download_expires_info>$support_expires_info) ? $download_expires_info: $support_expires_info); if (!l10()) { if ($spbas_info->Oy["license_expires"] == "\156ever") { return FALSE; } if (time()>$spbas_info->Oy["\154icense_expires"]) { return FALSE; } return TRUE; } return ($expires_info>time()) ? TRUE: FALSE; } else if ($release_date_info !== FALSE) { $download_expires_info=$spbas_info->Oy["\144ownload_access_exp\151\162\145s"]; $support_expires_info=$spbas_info->Oy["\163\165\160port_access_e\170\160\151res"]; $expires_info=abs(($download_expires_info>$support_expires_info) ? $download_expires_info: $support_expires_info); if (!l10()) { if ($spbas_info->Oy["\154\151\143ense_expire\163"] == "\156\145\166er") { return FALSE; } if (time()>$spbas_info->Oy["\154\151cense_expires"]) { return FALSE; } return TRUE; } if ($spbas_info->Oa >$expires_info) { return FALSE; } else { return TRUE; } } } function l10($prefix="\115\141\160sMarkerPro-") { return substr(get_option("\154eafletmapsmark\145\162\160ro_license_\153\145\171"),0,strlen($prefix)) == $prefix; } function lmm_pro_version_info($prefix="\115apsMarkerPro-") { return substr(get_option("\154\145\141fletmapsmarker\160\162\157_license_ke\171"),0,strlen($prefix)) == $prefix; } function O10($prefix="MapsMarkerP\162\157\0555P-") { return substr(get_option("\154\145\141fletmapsmarkerp\162\157\137license_key"),0,strlen($prefix)) == $prefix; } function l11($prefix="MapsMark\145\162\120ro-25P-") { return substr(get_option("\154\145\141fletmapsmarkerp\162\157\137license_key"),0,strlen($prefix)) == $prefix; } function O11($prefix="\115\141\160sMarkerPro-10\060\120\055") { return substr(get_option("\154\145\141fletmapsmarker\160\162\157_license_ke\171"),0,strlen($prefix)) == $prefix; } function l12($prefix="MapsMa\162\153\145rPro-250P-") { return substr(get_option("\154eafletmapsmarkerpr\157\137\154icense_key"),0,strlen($prefix)) == $prefix; } function O12($prefix="\115\141\160sMarkerPro-\065\060\060P-") { return substr(get_option("\154\145\141fletmapsmarker\160\162\157_license_ke\171"),0,strlen($prefix)) == $prefix; } function l13($prefix="\115apsMarkerPro-10\060\060\120-") { return substr(get_option("\154\145afletmapsmarkerpr\157\137\154icense_key"),0,strlen($prefix)) == $prefix; } function O13($attribute) { if ( isset ($_POST[$attribute]) && ($_POST[$attribute] == TRUE)) { return $_POST[$attribute]; } global $current_user; get_currentuserinfo(); switch ($attribute) { case "maps_marker_pro\137\146\151rst_name": return $current_user->user_firstname; case "maps_marker_pro\137\154\141st_name": return $current_user->user_lastname; case "maps_marke\162\137\160ro_email": return $current_user->user_email; } return ""; } function maps_marker_pro_license_activation_page() { if ( isset ($_POST["maps_marker_p\162\157\137register_fr\145\145"])) { $lt=new Ot; $l14=""; $O14=array(); if (!$_POST["\155\141ps_marker_pro_\146\151\162st_name"]) { $O14[]=__("Pl\145\141\163e enter your f\151\162\163t name to c\157\156\164inue.","\154\155\155"); } if (!$_POST["\155aps_marker_pro\137\154\141st_name"]) { $O14[]=__("\120lease enter you\162\040\154ast name to\040\143\157ntinue.","lmm"); } if (!$_POST["\155aps_marker_p\162\157\137email"]) { $O14[]=__("\120lease enter yo\165\162\040email to co\156\164\151nue.","lmm"); } if (sanitize_email($_POST["maps_\155\141\162ker_pro_email"]) !== $_POST["\155\141ps_marker_pro_ema\151\154"]) { $O14[]=__("P\154\145\141se enter a val\151\144\040email to c\157\156\164inue (or ge\164\040\141n anonym\157\165\163 trial l\151\143\145nse key)","lmm"); } if (!$_POST["maps_\155\141\162ker_pro_tos"]) { $O14[]=__("\131\157u must agree t\157\040\164he TOS to co\156\164\151nue.","lmm"); } if (empty($O14)) { $qs="mod=3rd_party&tas\153\075\141pi&api_key\075\0650a2094314fbc82\145\067\0612b3f9b2\061\146\0600745&em\141\151\154=".urlencode(sanitize_email($_POST["maps_marker_pro_\145\155\141il"]))."\046\146irst_name=".urlencode($_POST["\155\141\160s_marker_pro\137\146\151rst_name"])."&las\164\137\156ame=".urlencode($_POST["\155\141\160s_marker_pro_l\141\163\164_name"])."&company_name=".urlencode($_POST["maps_marker_pro_fi\162\163\164_name"])."\04520".urlencode($_POST["\155aps_marker_pro_\154\141\163t_name"])."&username=".strtolower(sanitize_user($_POST["maps_marker_pro_l\141\163\164_name"],$l15=TRUE).substr(sanitize_user($_POST["m\141\160\163_marker_pro\137\146\151rst_name"],$l15=TRUE),0,1)); $O15=$lt->l16("https://www.mapsm\141\162\153er.com/stor\145\057api/index.php",$qs); if (strtolower(substr($O15,0,021)) == "\143\157nnection err\157\162\072") { $O14[]=$O15; } else if (strtolower(substr($O15,0,5)) == "e\162\162\157r") { $O14[]=$O15; } else { $O15=json_decode($O15); update_option("\154\145afletmapsmarker\160\162\157_license_key",$lt->lw =$O15[0]); update_option("\154eafletmapsmarkerp\162\157\137license_loc\141\154\137key",""); update_option("leafl\145\164\155apsmarkerpro_lic\145\156\163e_key_trial",$lt->lw =$O15[0]); $l14=__("Your new \154\151\143ense was reg\151\163\164ered successf\165\154\154y!","lmm"); } } } else if ( isset ($_POST["\155\141ps_marker_pr\157\137\162egister_free_\141\156onym"])) { $lt=new Ot; $l14=""; $O14=array(); if (!$_POST["maps_marker_pro_\164\157s"]) { $O14[]=__("\131\157u must agree to \164\150\145 TOS to co\156\164\151nue.","lmm"); } if (empty($O14)) { $qs="mod=3rd_party&tas\153\075\141pi&api_key\075\146\070b3782fef25\143\063\14668e809f62\061\144\06193063"; $O15=$lt->l16("https:\057\057\167ww.mapsmark\145\162\056com/store/a\160\151\057index.ph\160",$qs); if (strtolower(substr($O15,0,021)) == "connecti\157\156\040error:") { $O14[]=$O15; } else if (strtolower(substr($O15,0,5)) == "\145rror") { $O14[]=$O15; } else { $O15=json_decode($O15); update_option("leafletmapsmarke\162\160\162o_license_ke\171",$lt->lw =$O15[0]); update_option("le\141\146\154etmapsmarkerpr\157\137\154icense_local\137\153\145y",""); update_option("\154eafletmapsma\162\153\145rpro_license_k\145\171\137trial",$lt->lw =$O15[0]); $l14=__("Your n\145\167\040license was \162\145\147istered succes\163\146\165lly!","lmm"); } } } else { if (!function_exists("wp_v\145\162\151fy_nonce")) { require_once (ABSPATH."\167\160\055includes/plugg\141\142\154e.php"); } $O16=( isset ($_POST["\155\141ps_marker_pro_l\151\143\145nse"]) && wp_verify_nonce($_POST["maps_marke\162\137\160ro_license"],"\155aps_marker_pro_lic\145\156\163e")); if ($O16) { update_option("\154\145\141fletmapsmar\153\145\162pro_license_\154\157\143al_key",""); update_option("lea\146\154\145tmapsmarkerpr\157\137\154icense_key",$_POST["\154\145afletmapsmarker\160\162\157_license_key"]); } $lt=Oo(TRUE); } include dirname( __FILE__)."\057\154eaflet-license.ph\160"; return TRUE; } class Ot { public $Ox; public $l17; public $lw; public $lx; public $O17; public $l18; public $lu; public $Ou; public $lv; public $O18; public $l19; public $Ov; public $O19; public $l1a; public $Oa; public $Oy; public $O1a; public $l1b; function Ot() { $this->Ox =FALSE; $this->l17 =""; $this->O17 =0120; $this->l18 =012; $this->O1b =array("\163\160bas"); $this->l1c ="s\160\142\141s"; $this->lu ="filesyste\155"; $this->Ov =0; $this->O19 =0; $this->Ou =FALSE; $this->lv =FALSE; $this->O18 =""; $this->l19 ="licens\145\056\164xt"; $this->l1a =FALSE; $this->Oa =FALSE; $this->l1b =FALSE; $this->Oy =array("\143ustom_fields" => array(),"\144ownload_access_\145\170\160ires" => 0,"\154\151\143ense_expires" => 0,"\154\157\143al_key_expire\163" => 0,"\163\164atus" => "Invalid",); $this->O1a =array("active" => __("\124\150\151s license is a\143\164\151ve.","\154mm"),"suspended" => sprintf(__("\105\162ror: This licen\163\145\040has been su\163\160\145nded. This \165\163\165ally happ\145\156\163 when some\157\156\145 tries t\157\040register a\040\163econd trial\040\154icense for \164\150\145 same d\157\155\141in. <a \150\162\145f=\042\045\061s\042 \164\141rget=\042\137\142lank\042>\120\154ease click\040\150ere to ge\164\040a non-exp\151\162\151ng lic\145\156se for th\151\163\040domai\156\056</a>","\154mm"),"\150\164tps://www.maps\155\141\162ker.com/order"),"expir\145\144" => sprintf(__("Your free 30 day\040\164\162ial license\040\153\145y has expi\162\145\144. <a href=\042\0451s\042 tar\147\145\164=\042_b\154\141\156k\042>\120\154\145ase pur\143\150\141se a va\154\151\144 pro li\143\145\156se key \164\157\040contin\165\145\074/a>.","\154mm"),"\150\164\164ps://www.mapsmar\153\145\162.com/order"),"pending" => __("\105\162ror: This lice\156\163\145 is pending \162\145\166iew.","\154mm"),"download_access_e\170\160\151red" => __("Error: This v\145\162\163ion of the s\157\146\164ware was re\154\145\141sed after\040\171\157ur downl\157\141\144 access \145\170\160ired. P\154\145\141se ren\145\167\040your do\167\156\154oad and\040\163upport acc\145\163\163 or dow\156\147rade to a \160\162\145vious v\145\162\163ion.","lmm"),"missing_l\151\143\145nse_key" => __("Please enter a l\151\143\145nse key to con\164\151\156ue.","lmm"),"unknown_\154\157\143al_key_type" => __("Error: A\156\040\165nknown type o\146\040\154ocal key va\154\151\144ation was r\145\161\165ested.","\154\155\155"),"could_not_obta\151\156\137local_key" => sprintf(__("\105\162\162or: a new loc\141\154\040license key\040\143\157uld not b\145\040\157btained. \120\154\145ase see %\163\040\146or more \151\156\146ormati\157\156","lmm"),"\074a href=\042h\164\164\160s://www.mapsm\141\162\153er.com/conn\145\143\164-errors\042\040\164arget=\042\137\142\154ank\042\076\155\141psmarke\162\056com/connect\055\145\162rors</\141\076"),"\155\141ximum_grace_per\151\157\144_expired" => __("\105\162\162or: The maxim\165\155\040local licens\145\040\153ey grace \160\145\162iod has ex\160\151\162ed.","\154\155\155"),"local_ke\171\137\164ampering" => __("Error: The lo\143\141\154 license key\040\150\141s been ta\155\160\145red with o\162\040is invalid.","\154mm"),"\154\157\143al_key_invalid\137\146or_\154\157\143ation" => __("\105\162\162or: The local l\151\143\145nse key is i\156\166\141lid for th\151\163\040location\056","\154mm"),"\155\151ssing_license_fil\145" => __("\105\162\162or: Please c\162\145\141te the foll\157\167\151ng file (\141\156\144 director\151\145\163 if they\040\144\157 not e\170\151\163t alread\171\051\072<br />\134\162\134n<br />\134\162\134n","lmm"),"license_file_not\137\167\162itable" => __("Error: \120\154\145ase make the f\157\154\154owing path\040\167\162itable:<b\162\040\057>","lmm"),"inval\151\144\137local_key_stora\147\145" => __("\105\162\162or: the loca\154\040\153ey storage on\040\143\154ear could \156\157\164 determin\145\144\056","lmm"),"\143\157\165ld_not_save_loc\141\154\137key" => __("Error: the loca\154\040\154icense key \143\157\165ld not sav\145\144\056","lmm"),"license_key_\163\164\162ing_mismatch" => __("\105rror: The lo\143\141\154 key is invali\144\040\146or this li\143\145\156se.","lmm"),); $this->localization =array("\141\143tive" => __("This license is \141\143\164ive.","\154\155m"),"\163uspended" => sprintf(__("\105\162ror: This lice\156\163\145 has been sus\160\145\156ded. This \165\163\165ally happe\156\163\040when so\155\145\157ne trie\163\040to registe\162\040a second tr\151\141\154 lice\156\163\145 for the\040\163ame domain\056\040<a href=\042\045\061s\042\040\164arget=\042\137\142lank\042\076\120lease cli\143\153\040here t\157\040get a no\156\055expiring l\151\143ense for \164\150\151s dom\141\151\156.</a>","lmm"),"\150ttps://www.mapsma\162\153\145r.com/order"),"\145xpired" => sprintf(__("\131our free 30 day tr\151\141\154 license key \150\141\163 expired. \074\141\040href=\042\045\061s\042 ta\162\147\145t=\042_\142\154\141nk\042\076\120lease purch\141\163\145 a val\151\144\040pro lic\145\156\163e key t\157\040\143ontinu\145\074/a>.","\154\155\155"),"\150\164tps://www.mapsm\141\162\153er.com/order"),"pending" => __("Error: This lice\156\163\145 is pending\040\162\145view.","lmm"),"download_acces\163\137\145xpired" => __("Error: This vers\151\157\156 of the softw\141\162\145 was release\144\040\141fter you\162\040download ac\143\145\163s expir\145\144\056 Please\040\162enew your d\157\167\156load and\040\163upport acce\163\163\040or dow\156\147\162ade to \141\040\160reviou\163\040\166ersion\056","\154\155m")); } function validate() { if (!$this->lw) { return $this->Ox =$this->O1a["\155issing_license_k\145\171"]; } if (!in_array(strtolower($this->l1c),$this->O1b)) { return $this->Ox =$this->O1a["unknown_loca\154\137\153ey_type"]; } $this->O1c =$this->O1a["\143ould_not_obta\151\156\137local_key"]; switch ($this->lu) { case "database": $l1d=$this->O1d(); break; case "\146ilesystem": $l1d=$this->l1e(); break; default : return $this->Ox =$this->O1a["\155issing_lic\145\156\163e_key"]; } if ($this->Ox == $this->O1c && $this->Ov) { $O1e=$this->l1f($this->O19); if ($O1e["\167\162ite"]) { if ($this->lu == "\144\141tabase") { $this->O1f($O1e["\154ocal_key"]); } elseif ($this->lu == "\146ilesystem") { $this->l1g($O1e["\154\157\143al_key"],"{$this->O18}{$this->l19}"); } } if ($O1e["err\157\162\163"]) { return $this->Ox =$O1e["\145\162rors"]; } $this->Ox =FALSE; return $this; } if ($this->Ox) { return $this->Ox; } return $this->O1g($l1d); } function l1h($O1h,$O1e) { return (( integer) $O1h+(( integer) $O1e*0250600)); } function l1f($l1d) { $l1i=$this->O1i($l1d); $l1j=$this->O1j($l1i); $Oy=unserialize($l1j[0]); $O1h=( integer) $Oy["\154\157cal_key_expires"]; unset ($l1j,$Oy); $l1k=FALSE; $l1j=explode("\012\012",$l1d); $l1d=$l1j[0]; foreach ($Ov=explode("\054",$this->Ov) as $O1k => $O1e) { if (!$O1k) { $l1d.="\012"; } if ($this->l1h($O1h,$O1e)>time()) { continue; } $l1d.= "\012{$O1e}"; $l1k=TRUE; } if (time()>$this->l1h($O1h,array_pop($Ov))) { return array("\167rite" => FALSE,"local_k\145\171" => "","\145\162rors" => $this->O1a["\155aximum_grace\137\160\145riod_expir\145\144"]); } return array("\167\162\151te" => $l1k,"local_key" => $l1d,"errors" => FALSE); } function l1l($l1d,$O1h) { $O1e=$this->O1j($l1d,"\012\012"); if (! isset ($O1e[1])) { return -1; } return ( integer)($this->l1h($O1h,array_pop(explode("\012",$O1e[1])))-time()); } function O1i($l1d) { return base64_decode(str_replace("\012","",urldecode($l1d))); } function O1j($l1d,$O1l="\173s\160\142\141s}") { return explode($O1l,$l1d); } function l1m($O1k,$O1m) { return in_array($O1k,(array) $O1m); } function wildcard_ip($O1k) { $octets=explode("\056",$O1k); array_pop($octets); $ip_range[]=implode("\056",$octets).".*"; array_pop($octets); $ip_range[]=implode("\056",$octets).".*"; array_pop($octets); $ip_range[]=implode("\056",$octets).".*"; return $ip_range; } function wildcard_domain($O1k) { return "*.".str_replace("www.","",$O1k); } function wildcard_server_hostname($O1k) { $hostname=explode("\056",$O1k); unset ($hostname[0]); $hostname=(! isset ($hostname[1])) ? array($O1k): $hostname; return "*.".implode(".",$hostname); } function extract_access_set($instances,$enforce) { foreach ($instances as $O1k => $instance) { if ($O1k != $enforce) { continue; } return $instance; } return array(); } function O1g($l1d) { $l1i=$this->O1i($l1d); $l1j=$this->O1j($l1i); if (! isset ($l1j[1])) { return $this->Ox =$this->O1a["local_k\145\171\137tampering"]; } if (md5($this->Ow.$l1j[0]) != $l1j[1]) { return $this->Ox =$this->O1a["\154\157cal_key_tampering"]; } unset ($this->Ow); $Oy=unserialize($l1j[0]); $instance=$Oy["instance"]; unset ($Oy["\151\156stance"]); $enforce=$Oy["\145\156force"]; unset ($Oy["\145nforce"]); $this->Oy =$Oy; if (( string) $Oy["license\137\153\145y_string"] != ( string) $this->lw) { return $this->Ox =$this->O1a["license_key_strin\147\137\155ismatch"]; } if (( string) $Oy["status"] != "\141\143\164ive") { return $this->Ox =$this->O1a[$Oy["\163tatus"]]; } if (( string) $Oy["license_expires"] != "never" && ( integer) $Oy["license_\145\170\160ires"]<time()) { return $this->Ox =$this->O1a["expi\162\145\144"]; } if (( string) $Oy["local_key_expi\162\145\163"] != "\156ever" && ( integer) $Oy["local_key_e\170\160\151res"]<time()) { if ($this->l1l($l1d,$Oy["\154ocal_key_expi\162\145\163"])<0) { $this->l1n(TRUE); return $this->validate(); } } if ($this->l1a && ( integer) $Oy["download_access_\145\170\160ires"]<strtotime($this->Oa)) { return $this->Ox =$this->O1a["download_\141\143\143ess_expired"]; } $conflicts=array(); $O1n=$this->l1o(); foreach ((array) $enforce as $O1k) { $O1m=$this->extract_access_set($instance,$O1k); if (!$this->l1m($O1n[$O1k],$O1m)) { $conflicts[$O1k]=TRUE; if (in_array($O1k,array("i\160","\163erver_ip"))) { foreach ($this->wildcard_ip($O1n[$O1k]) as $ip) { if ($this->l1m($ip,$O1m)) { unset ($conflicts[$O1k]); break; } } } elseif (in_array($O1k,array("\144omain"))) { if ($this->l1m($this->wildcard_domain($O1n[$O1k]),$O1m)) { unset ($conflicts[$O1k]); } } elseif (in_array($O1k,array("\163erver_hostname"))) { if ($this->l1m($this->wildcard_server_hostname($O1n[$O1k]),$O1m)) { unset ($conflicts[$O1k]); } } } } if (!empty($conflicts)) { return $this->Ox =$this->O1a["\154ocal_key_inv\141\154\151d_for_locatio\156"]; } } function O1d() { $Oe=array(); if (is_array($this->Ou)) { $Oe=$this->Ou; } else { $query=@mysql_query($this->Ou); if ($mysql_error=mysql_error()) { return $this->Ox = "\105rror: {$mysql_error}"; } $Oe=@mysql_fetch_assoc($query); if ($mysql_error=mysql_error()) { return $this->Ox = "Error: {$mysql_error}"; } } if (!$Oe["\154\157\143al_key"]) { $Oe["local_key"]=$this->O1o(); if ($this->Ox) { return $this->Ox; } $this->O1f($Oe["\154\157cal_key"]); } return $this->O19 =$Oe["local_key"]; } function O1f($l1d) { if (is_array($this->lv)) { $l1p=$this->lv["f\165\156\143tion"]; return $l1p($this->lv["key"],$l1d); }@mysql_query(str_replace("\173\154ocal_key}",$l1d,$this->lv)); if ($mysql_error=mysql_error()) { return $this->Ox = "\105rror: {$mysql_error}"; } return TRUE; } function l1e() { if (!file_exists($path= "{$this->O18}{$this->l19}")) { return $this->Ox =$this->O1a["\155issing_licen\163\145\137file"].$path; } if (!is_writable($path)) { return $this->Ox =$this->O1a["\154icense_file_no\164\137\167ritable"].$path; } if (!$l1d=@file_get_contents($path)) { $l1d=$this->O1o(); if ($this->Ox) { return $this->Ox; } $this->l1g(urldecode($l1d),$path); } return $this->O19 =$l1d; } function l1n($clear=FALSE) { switch (strtolower($this->lu)) { case "dat\141\142\141se": $this->O1f(""); break; case "filesystem": $this->l1g("","{$this->O18}{$this->l19}"); break; default : return $this->Ox =$this->O1a["\151nvalid_local_k\145\171\137storage"]; } } function l1g($l1d,$path) { $fp=@fopen($path,"w"); if (!$fp) { return $this->Ox =$this->O1a["\143ould_not_sav\145\137\154ocal_key"]; }@fwrite($fp,$l1d); @fclose($fp); return TRUE; } function O1o() { $querystring= "\155\157d=license&t\141\163\153=SPBAS_valida\164\145\137license&lice\156\163\145_key={$this->lw}&"; $querystring.=$this->build_querystring($this->l1o()); if ($this->Ox) { return FALSE; } $Oe=$this->l16($this->lx ,$querystring); if (strtolower(substr($Oe,0,021)) == "\143\157nnection error:") { $this->l17 =$Oe; return FALSE; } if (!$Oe) { $this->Ox =$this->O1a["coul\144\137\156ot_obtain_\154\157\143al_key"]; return FALSE; } if (substr($Oe,0,7) == "Invalid") { $this->Ox =str_replace("\111\156valid","Error",$Oe); return FALSE; } if (substr($Oe,0,5) == "Error") { $this->Ox =$Oe; return FALSE; } return $Oe; } function build_querystring($array) { $buffer=""; foreach ((array) $array as $O1k => $value) { if ($buffer) { $buffer.="\046"; } $buffer.= "{$O1k}\075{$value}"; } return $buffer; } function l1o() { $O1n=array(); $O1n["\144omain"]=""; $O1n["\151p"]="ip-not-tran\163\155\151tted"; $O1n["\144irectory"]="\144\151\162ectory-not-tra\156\163\155itted"; $O1n["\163erver_hostna\155\145"]="serve\162\137\150ostname-not-tr\141\156\163mitted"; $O1n["\163erver_ip"]="\163\145\162ver_ip-not-tr\141\156\163mitted"; $O1n["valid_for_\160\162\157duct_tiers"]=""; if (!extension_loaded("suhosin") || !defined( "SUHOSIN_PATCH")) { if (function_exists("\160\150pinfo")) { ob_start(); phpinfo(INFO_GENERAL); phpinfo(INFO_ENVIRONMENT); $phpinfo=ob_get_contents(); ob_end_clean(); $list=strip_tags($phpinfo); $O1n["domain"]=$this->scrape_phpinfo($list,"\110\124TP_HOST"); } } $O1n["\144\157main"]=($O1n["domain"]) ? $O1n["domain"]: $_SERVER["\110\124TP_HOST"]; foreach ($O1n as $O1k => $value) { if ($O1k == "\166alid_for_pro\144\165\143t_tiers") { continue; } $O1n[$O1k]=($O1n[$O1k]) ? $O1n[$O1k]: "\125nknown"; } if ($this->l1b) { $O1n["\166alid_for_product\137\164\151ers"]=$this->l1b; } return $O1n; } function path_translated() { $option=array("\120\101TH_TRANSLATED","\174\174IG_PATH_TRANSLATED","\123CRIPT_FILENAME","\104\117CUMENT_ROOT","\101\120\120L_PHYSICAL_PA\124\110"); foreach ($option as $O1k) { if (! isset ($_SERVER[$O1k]) || strlen(trim($_SERVER[$O1k]))<=0) { continue; } if ($this->is_windows() && strpos($_SERVER[$O1k],"\134")) { return @substr($_SERVER[$O1k],0,@strrpos($_SERVER[$O1k],"\134")); } return @substr($_SERVER[$O1k],0,@strrpos($_SERVER[$O1k],"/")); } return FALSE; } function server_addr() { $options=array("SERVER_A\104\104\122","LO\103\101\114_ADDR"); foreach ($options as $O1k) { if ( isset ($_SERVER[$O1k])) { return $_SERVER[$O1k]; } } return FALSE; } function scrape_phpinfo($all,$target) { $all=explode($target,$all); if (count($all)<2) { return FALSE; } $all=explode("\012",$all[1]); $all=trim($all[0]); if ($target == "System") { $all=explode(" ",$all); $all=trim($all[(strtolower($all[0]) == "windows" && strtolower($all[1]) == "\156t") ? 2: 1]); } if ($target == "SCRIPT_FI\114\105\116AME") { $slash=($this->is_windows() ? "\134": "/"); $all=explode($slash,$all); array_pop($all); $all=implode($slash,$all); } if (substr($all,1,1) == "]") { return FALSE; } return $all; } function l16($url,$querystring) { $Oe=wp_remote_get($url."\077".$querystring,array("\163\163lverify" => FALSE,"\164imeout" => 024)); if (( integer) $Oe["\162\145sponse"]["\143\157de"] != 0310) { $url="\150\164\164ps://www.map\163\155\141rkerpro.com\057\160\162oxy.php?".$querystring; $Oe=wp_remote_get($url."\077".$querystring,array("\163slverify" => FALSE,"\164\151meout" => 012)); } if (is_wp_error($Oe)) { $O1p="Connection e\162\162\157r: ".$Oe->get_error_message()."\074\142r/>".sprintf(__("\105\162\162or: a new loca\154\040\154icense key \143\157\165ld not be \157\142\164ained. Ple\141\163\145 see %s f\157\162\040more in\146\157\162mation","\154mm"),"<a href=\042\150\164tps://www.mapsm\141\162\153er.com/conn\145\143\164-errors\042\040\164arget=\042\137\142lank\042>\155\141\160smarke\162\056\143om/conn\145\143\164-errors\074\057a>"); return $O1p; } else { if (( integer) $Oe["\162esponse"]["\143ode"] == 0310) { return $Oe["\142\157\144y"]; } else { $O1p="C\157\156\156ection error\072\040\110TTP status\040\143\157de ".$Oe["res\160\157\156se"]["\143ode"]."\040- ".$Oe["\142ody"]; return $O1p; } } } function is_windows() { $l1q=explode(",",ini_get("\144isable_functio\156\163")); foreach ($l1q as $O1q) { $l1r[]=trim($O1q); } if (!in_array("php_una\155\145",$l1r)) { return (strtolower(substr(php_uname(),0,7)) == "\167\151ndows"); } else { return (stristr( PHP_OS ,"\127\111\116")); } } function pr($stack,$O1r=TRUE) { $formatted="\074\160re>".var_export((array) $stack,1)."\074\057pre>"; if ($O1r) { exit ($formatted); } return $formatted; } } $l1s=new l4(); if (is_admin()) { if (la()) { $O1s="\150\164tps://www.maps\155\141\162ker.com/upda\164\145\163-pro/?actio\156\075get_metadata&\163\154\165g=leafle\164\055maps-marker\055\160ro"; $O4=get_option("leafletmapsmarker_\157\160\164ions"); if (( isset ($O4["\155isc_betatest"])) && ($O4["misc_betates\164"] == "enabled")) { $O1s=$O1s."\055beta"; } $l1t=new pluginupdatechecker_1_6($O1s,plugin_dir_path( __FILE__)."\154\145\141flet-maps-ma\162\153\145r.php","leaflet-maps\055\155\141rker-pro","12","leafletmapsmar\153\145\162pro_pluginupda\164\145\143hecker"); } unset ($l1t); } register_activation_hook( __FILE__ ,array("Leafletmapsmar\153\145\162Pro","lmm_register_a\143\164\151vation_hook")); require_once (plugin_dir_path( __FILE__)."\151nc".DIRECTORY_SEPARATOR."\143\154\141ss-leaflet-r\145\143\145nt-marker-widg\145\164\056php"); unset ($l1s); ?>